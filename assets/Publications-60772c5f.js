import{q as ne,d as V,I as ae,x as W,v as re,f as T,c as z,Q as se,b as N,w as P,J as ee,a as I,K as L,y as j,t as q,O as te,T as Me,R as ue,X as Fe,a2 as je,a3 as qe,a4 as Y,a5 as Ye,A as Ie,a6 as Ke,a7 as Ge,a8 as Ze,a9 as Re,aa as Xe,r as J,ab as Ne,o as De,ac as et,B as tt,g as R,n as ze,h as K,M as Be,ad as nt,F as H,L as st,ae as rt,af as ot,ag as it,G as Pe,m as Le,ah as oe,ai as at,aj as Te,ak as ut,al as ct,u as lt,E as pt,e as Z,Z as U,p as ft,i as bt,j as mt,k as dt,a0 as yt,$ as ht,_ as _t}from"./index-3fe1c7c1.js";import{E as gt,a as $t,b as vt}from"./timeline-item-9423c422.js";import{E as xt}from"./tag-2f449244.js";const wt=ne({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),St=["textContent"],kt=V({name:"ElBadge"}),Et=V({...kt,props:wt,setup(E,{expose:O}){const h=E,n=ae("badge"),a=W(()=>h.isDot?"":re(h.value)&&re(h.max)?h.max<h.value?`${h.max}+`:`${h.value}`:`${h.value}`);return O({content:a}),(l,m)=>(T(),z("div",{class:L(j(n).b())},[se(l.$slots,"default"),N(Me,{name:`${j(n).namespace.value}-zoom-in-center`,persisted:""},{default:P(()=>[ee(I("sup",{class:L([j(n).e("content"),j(n).em("content",l.type),j(n).is("fixed",!!l.$slots.default),j(n).is("dot",l.isDot)]),textContent:q(j(a))},null,10,St),[[te,!l.hidden&&(j(a)||l.isDot)]])]),_:1},8,["name"])],2))}});var Ot=ue(Et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Ct=Fe(Ot);var jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};const Nt=ne({checked:{type:Boolean,default:!1}}),Bt={"update:checked":E=>je(E),[qe]:E=>je(E)},Pt=V({name:"ElCheckTag"}),Tt=V({...Pt,props:Nt,emits:Bt,setup(E,{emit:O}){const h=E,n=ae("check-tag"),a=()=>{const l=!h.checked;O(qe,l),O("update:checked",l)};return(l,m)=>(T(),z("span",{class:L([j(n).b(),j(n).is("checked",l.checked)]),onClick:a},[se(l.$slots,"default")],2))}});var At=ue(Tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const Mt=Fe(At),ie={},Ft=ne({a11y:{type:Boolean,default:!0},locale:{type:Y(Object)},size:Ye,button:{type:Y(Object)},experimentalFeatures:{type:Y(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Y(Object)},zIndex:Number,namespace:{type:String,default:"el"}});V({name:"ElConfigProvider",props:Ft,setup(E,{slots:O}){Ie(()=>E.message,n=>{Object.assign(ie,n??{})},{immediate:!0,deep:!0});const h=Ke(E);return()=>se(O,"default",{config:h==null?void 0:h.value})}});const Qe=["success","info","warning","error"],F=Ze({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Re?document.body:void 0}),qt=ne({customClass:{type:String,default:F.customClass},center:{type:Boolean,default:F.center},dangerouslyUseHTMLString:{type:Boolean,default:F.dangerouslyUseHTMLString},duration:{type:Number,default:F.duration},icon:{type:Ge,default:F.icon},id:{type:String,default:F.id},message:{type:Y([String,Object,Function]),default:F.message},onClose:{type:Y(Function),required:!1},showClose:{type:Boolean,default:F.showClose},type:{type:String,values:Qe,default:F.type},offset:{type:Number,default:F.offset},zIndex:{type:Number,default:F.zIndex},grouping:{type:Boolean,default:F.grouping},repeatNum:{type:Number,default:F.repeatNum}}),It={destroy:()=>!0},D=Xe([]),Rt=E=>{const O=D.findIndex(a=>a.id===E),h=D[O];let n;return O>0&&(n=D[O-1]),{current:h,prev:n}},Dt=E=>{const{prev:O}=Rt(E);return O?O.vm.exposed.bottom.value:0},zt=(E,O)=>D.findIndex(n=>n.id===E)>0?20:O,Lt=["id"],Qt=["innerHTML"],Wt=V({name:"ElMessage"}),Jt=V({...Wt,props:qt,emits:It,setup(E,{expose:O}){const h=E,{Close:n}=rt,a=ae("message"),l=J(),m=J(!1),g=J(0);let $;const y=W(()=>h.type?h.type==="error"?"danger":h.type:"info"),o=W(()=>{const c=h.type;return{[a.bm("icon",c)]:c&&Ne[c]}}),e=W(()=>h.icon||Ne[h.type]||""),s=W(()=>Dt(h.id)),r=W(()=>zt(h.id,h.offset)+s.value),u=W(()=>g.value+r.value),b=W(()=>({top:`${r.value}px`,zIndex:h.zIndex}));function k(){h.duration!==0&&({stop:$}=ot(()=>{w()},h.duration))}function S(){$==null||$()}function w(){m.value=!1}function d({code:c}){c===it.esc&&w()}return De(()=>{k(),m.value=!0}),Ie(()=>h.repeatNum,()=>{S(),k()}),et(document,"keydown",d),tt(l,()=>{g.value=l.value.getBoundingClientRect().height}),O({visible:m,bottom:u,close:w}),(c,x)=>(T(),R(Me,{name:j(a).b("fade"),onBeforeLeave:c.onClose,onAfterLeave:x[0]||(x[0]=f=>c.$emit("destroy")),persisted:""},{default:P(()=>[ee(I("div",{id:c.id,ref_key:"messageRef",ref:l,class:L([j(a).b(),{[j(a).m(c.type)]:c.type&&!c.icon},j(a).is("center",c.center),j(a).is("closable",c.showClose),c.customClass]),style:ze(j(b)),role:"alert",onMouseenter:S,onMouseleave:k},[c.repeatNum>1?(T(),R(j(Ct),{key:0,value:c.repeatNum,type:j(y),class:L(j(a).e("badge"))},null,8,["value","type","class"])):K("v-if",!0),j(e)?(T(),R(j(Be),{key:1,class:L([j(a).e("icon"),j(o)])},{default:P(()=>[(T(),R(nt(j(e))))]),_:1},8,["class"])):K("v-if",!0),se(c.$slots,"default",{},()=>[c.dangerouslyUseHTMLString?(T(),z(H,{key:1},[K(" Caution here, message could've been compromised, never use user's input as message "),I("p",{class:L(j(a).e("content")),innerHTML:c.message},null,10,Qt)],2112)):(T(),z("p",{key:0,class:L(j(a).e("content"))},q(c.message),3))]),c.showClose?(T(),R(j(Be),{key:2,class:L(j(a).e("closeBtn")),onClick:st(w,["stop"])},{default:P(()=>[N(j(n))]),_:1},8,["class","onClick"])):K("v-if",!0)],46,Lt),[[te,m.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Vt=ue(Jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Ht=1;const We=E=>{const O=!E||Pe(E)||Le(E)||oe(E)?{message:E}:E,h={...F,...O};if(!h.appendTo)h.appendTo=document.body;else if(Pe(h.appendTo)){let n=document.querySelector(h.appendTo);ut(n)||(n=document.body),h.appendTo=n}return h},Ut=E=>{const O=D.indexOf(E);if(O===-1)return;D.splice(O,1);const{handler:h}=E;h.close()},Yt=({appendTo:E,...O},h)=>{const{nextZIndex:n}=at(),a=`message_${Ht++}`,l=O.onClose,m=document.createElement("div"),g={...O,zIndex:n()+O.zIndex,id:a,onClose:()=>{l==null||l(),Ut(e)},onDestroy:()=>{Te(null,m)}},$=N(Vt,g,oe(g.message)||Le(g.message)?{default:oe(g.message)?g.message:()=>g.message}:null);$.appContext=h||G._context,Te($,m),E.appendChild(m.firstElementChild);const y=$.component,e={id:a,vnode:$,vm:y,handler:{close:()=>{y.exposed.visible.value=!1}},props:$.component.props};return e},G=(E={},O)=>{if(!Re)return{close:()=>{}};if(re(ie.max)&&D.length>=ie.max)return{close:()=>{}};const h=We(E);if(h.grouping&&D.length){const a=D.find(({vnode:l})=>{var m;return((m=l.props)==null?void 0:m.message)===h.message});if(a)return a.props.repeatNum+=1,a.props.type=h.type,a.handler}const n=Yt(h,O);return D.push(n),n.handler};Qe.forEach(E=>{G[E]=(O={},h)=>{const n=We(O);return G({...n,type:E},h)}});function Kt(E){for(const O of D)(!E||E===O.props.type)&&O.handler.close()}G.closeAll=Kt;G._context=null;const Ae=ct(G,"$message");var Je={exports:{}};(function(E,O){(function(h,n){E.exports=n()})(jt,function(){return function(h){function n(l){if(a[l])return a[l].exports;var m=a[l]={i:l,l:!1,exports:{}};return h[l].call(m.exports,m,m.exports,n),m.l=!0,m.exports}var a={};return n.m=h,n.c=a,n.d=function(l,m,g){n.o(l,m)||Object.defineProperty(l,m,{configurable:!1,enumerable:!0,get:g})},n.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(m,"a",m),m},n.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},n.p="",n(n.s=17)}([function(h,n,a){function l(e,s){if(typeof e!="string")throw new Error("Expected to be string: "+JSON.stringify(s||e));return e}function m(e,s){if(e===void 0)throw new Error("Expected to be defined: "+JSON.stringify(s||e));return e}function g(e,s){if(!$(e))throw new Error("Expected to be array: "+JSON.stringify(s||e));return e}function $(e){return!!e&&e.constructor===Array}function y(e){return typeof e=="number"}function o(e){return typeof e=="string"}Object.defineProperty(n,"__esModule",{value:!0}),n.mustBeString=l,n.mustBeDefined=m,n.mustBeArray=g,n.isArray=$,n.isNumber=y,n.isString=o,n.flattenMyArray=function(e,s){s||(s=[]);for(var r=0,u=e.length;r<u;r++){var b=e[r];if(Array.isArray(b))for(var k=0,S=b.length;k<S;k++){var w=b[k];Array.isArray(w)?n.flattenMyArray(w,s):s.push(w)}else s.push(b)}return s}},function(h,n,a){function l(e){return e.type==="quotedstringwrapper"}function m(e){return e.type==="quotedstring"}var g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var u in r)r.hasOwnProperty(u)&&(s[u]=r[u])};return function(s,r){function u(){this.constructor=s}e(s,r),s.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var $=a(4),y=function(e){function s(r,u){return e.call(this,"quotedstring",r,u)||this}return g(s,e),s}($.BibStringComponent);n.QuotedString=y;var o=function(e){function s(r){return e.call(this,"quotedstringwrapper",r)||this}return g(s,e),s}($.BibOuterStringComponent);n.OuterQuotedString=o,n.isOuterQuotedString=l,n.isQuotedString=m},function(h,n,a){function l(e){return e.type==="bracedstringwrapper"}function m(e){return e.type==="bracedstring"}var g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var u in r)r.hasOwnProperty(u)&&(s[u]=r[u])};return function(s,r){function u(){this.constructor=s}e(s,r),s.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var $=a(4),y=function(e){function s(r,u){var b=e.call(this,"bracedstring",r,u)||this;return b.isSpecialCharacter=r===0&&u[0]==="\\",b}return g(s,e),s}($.BibStringComponent);n.BracedString=y;var o=function(e){function s(r){return e.call(this,"bracedstringwrapper",r)||this}return g(s,e),s}($.BibOuterStringComponent);n.OuterBracedString=o,n.isOuterBracedString=l,n.isBracedString=m},function(h,n,a){function l(f){return typeof f.braceDepth=="number"&&typeof f.type=="string"}function m(f){return f.type==="ContiguousSimpleString"&&c.isArray(f.data)}function g(f){return f.data.join("")}function $(f,i){if(c.isNumber(i)||c.isString(i))return i;if(S.isStringRef(i))return new S.StringRef(0,i.stringref);switch(c.mustBeString(i.type,i)){case"id":case"ws":case"number":return c.mustBeString(i.string);case"bracedstring":case"braced":if(!c.isArray(i.data))throw new Error("Expect array for data: "+JSON.stringify(i));return new w.BracedString(f,c.flattenMyArray(i.data).map(function(t){return $(f+1,t)}));case"quotedstring":if(!c.isArray(i.data))throw new Error("Expect array for data: "+JSON.stringify(i));var p=c.flattenMyArray(i.data);return new d.QuotedString(f,p.map(function(t){return $(f,t)}));default:throw new Error("Unexpected complex string type: "+i.type)}}function y(f){if(c.isString(f))return f;if(c.isNumber(f))return f+"";if(w.isBracedString(f)||d.isQuotedString(f)||d.isOuterQuotedString(f)||w.isOuterBracedString(f))return o(f.data);throw new Error(JSON.stringify(f))}function o(f){return f.map(y).join("")}function e(f,i){for(var p=[],t=0,_=f;t<_.length;t++){var v=_[t],C=s(v,i);c.isArray(C)?p=p.concat(C):p.push(C)}return p}function s(f,i){if(w.isBracedString(f))return f;if(d.isQuotedString(f)){var p=e(f.data,!0);return c.isArray(p)?i?p:x.concat(p).concat(x):i?p:['"',p,'"']}if(d.isOuterQuotedString(f))return e(f.data,!0);if(w.isOuterBracedString(f))return e(f.data,!1);if(c.isString(f)||c.isNumber(f))return f;throw S.isStringRef(f)?new Error("StringRef should be resolved at this point!"):new Error}function r(f){for(var i=[],p=0,t=f;p<t.length;p++){var _=t[p];if(c.isString(_)||c.isNumber(_))if(i.length<=0){var v={type:"ContiguousSimpleString",data:[_]};i.push(v)}else{var C=i[i.length-1];if(m(C))C.data.push(_);else{var v={type:"ContiguousSimpleString",data:[_]};i.push(v)}}else i.push(_)}return i}function u(f){return k(f,/\s+and\s+/g)}function b(f,i){return i===void 0&&(i=2),k(f,/\s*,\s*/g,i)}function k(f,i,p){for(var t=[],_=[],v=0,C=f;v<C.length;v++){var B=C[v];if(c.isString(B)&&(p===void 0||p>0)){var M=i.exec(B),A=0;if(M){do{var Q=A;A=M.index+M[0].length,_.push(B.substring(Q,M.index)),(p===void 0||p>0)&&(t.push(_),_=[],p!==void 0&&p>0&&p--),M=p===void 0||p>0?i.exec(B):void 0}while(M);A>0&&A<B.length&&_.push(B.substring(A))}else _.push(B)}else _.push(B)}return _.length>0&&t.push(_),t}Object.defineProperty(n,"__esModule",{value:!0});var S=a(5),w=a(2),d=a(1),c=a(0);n.isBibStringComponent=l,n.isContiguousSimpleString=m,n.joinContiguousSimpleStrings=g,n.parseStringComponent=$,n.toStringBibStringDatum=y,n.toStringBibStringData=o,n.flattenQuotedStrings=e;var x=['"'];n.globContiguousStrings=r,n.splitOnAnd=u,n.splitOnComma=b,n.splitOnPattern=k},function(h,n,a){var l=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s])};return function(o,e){function s(){this.constructor=o}y(o,e),o.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}}();Object.defineProperty(n,"__esModule",{value:!0});var m=a(0),g=function(){function y(o,e,s){this.type=o,this.braceDepth=e,this.data=s}return y.isBibStringComponent=function(o){return typeof o.braceDepth=="number"&&typeof o.type=="string"},y.stringifyDatum=function(o){if(m.isString(o))return o;if(m.isNumber(o))return o.toString();if(y.isBibStringComponent(o))return o.stringify();throw new Error("Unexpected state")},y.prototype.stringify=function(){return this.data.map(y.stringifyDatum).join("")},y}();n.BibStringComponent=g;var $=function(y){function o(e,s){return y.call(this,e,0,s)||this}return l(o,y),o}(g);n.BibOuterStringComponent=$},function(h,n,a){function l(g){return typeof g.stringref=="string"}Object.defineProperty(n,"__esModule",{value:!0});var m=function(){function g($,y){this.braceDepth=$,this.stringref=y}return g}();n.StringRef=m,n.isStringRef=l},function(h,n,a){function l(r){return typeof r.key=="string"&&r.value!==void 0}function m(r){if(l(r))return{key:r.key,value:g(r.value)};throw new Error("Was not a KeyVal: "+JSON.stringify(r))}function g(r){if(e.isNumber(r))return r;var u=e.mustBeArray(r.data);switch(r.type){case"quotedstringwrapper":return u.length===1&&e.isNumber(u[0])?u[0]:new o.OuterQuotedString(u.map(function(b){return s.parseStringComponent(0,b)}));case"bracedstringwrapper":return new y.OuterBracedString(u.map(function(b){return s.parseStringComponent(0,b)}));default:throw new Error("Unexpected value: "+JSON.stringify(r))}}function $(r){if(r)return e.isNumber(r)?r:r.stringify()}Object.defineProperty(n,"__esModule",{value:!0});var y=a(2),o=a(1),e=a(0),s=a(3);n.isKeyVal=l,n.newKeyVal=m,n.parseFieldValue=g,n.normalizeFieldValue=$},function(h,n,a){function l(c){var x=m(c),f=x.key,i=x.value;return new d(f,i)}function m(c){if(r.isKeyVal(c))return r.newKeyVal(c);if(c.type!=="string")throw new Error("Unexpected node: "+JSON.stringify(c));return m(c.data)}function g(c){var x={};return Object.keys(c).forEach(function(f){x[f]||(x[f]=y({},x,c,c[f]))}),x}function $(c,x,f,i){return c.data.map(function(p){if(S.isString(p)||S.isNumber(p))return p;if(u.isStringRef(p))return o(x,i,p,f);if(w.isBibStringComponent(p))return e(p,x,f,i);throw new Error})}function y(c,x,f,i){return S.isNumber(i)?i:k.isOuterBracedString(i)||b.isOuterQuotedString(i)?s(i,c,x,f):u.isStringRef(i)?o(c,f,i,x):i}function o(c,x,f,i){var p=f.stringref;if(c[p])throw new Error("Cycle detected: "+p);if(i[p])return i[p];if(!x[p])throw new Error('Unresolved reference: "'+f.stringref+'" ('+JSON.stringify(f)+")");return i[p]=y(Object.assign({},c,(t={},t[p]=!0,t)),i,x,x[p]),i[p];var t}function e(c,x,f,i){var p=$(c,x,f,i),t=c.braceDepth;if(b.isQuotedString(c))return new b.QuotedString(t,p);if(k.isBracedString(c))return new k.BracedString(t,p);if(b.isOuterQuotedString(c))return new b.OuterQuotedString(p);if(k.isOuterBracedString(c))return new k.OuterBracedString(p);throw new Error}function s(c,x,f,i){var p=e(c,x,f,i);if(!k.isOuterBracedString(p)&&!b.isOuterQuotedString(p))throw new Error;return p}Object.defineProperty(n,"__esModule",{value:!0});var r=a(6),u=a(5),b=a(1),k=a(2),S=a(0),w=a(3),d=function(){function c(x,f){this.type="string",this.key=x,this.value=f}return c}();n.BibStringEntry=d,n.newStringEntry=l,n.resolveStrings=g,n.resolveStringReferences=$,n.resolveStringReference=y,n.copyWithResolvedStringReferences=e,n.copyOuterWithResolvedStringReferences=s},function(h,n,a){function l(i){var p=d.toStringBibStringData(i);return p?p.charAt(0):""}function m(i){return i.length>0&&g(i[0])}function g(i){if(b.isString(i)){if(!i)return!1;var p=i.charAt(0);return p.toLowerCase()===p&&p.toUpperCase()!==p}if(k.isQuotedString(i))return!(!i.data||i.data.length<=0)&&g(i.data[0]);if(S.isStringRef(i)||k.isOuterQuotedString(i)||w.isOuterBracedString(i))throw new Error("Should not do this test on this type");return!1}function $(i){for(var p=d.splitOnPattern(i,c),t=-1,_=-1,v=-1,C=0;C<p.length-1;C++)m(p[C])&&(t<0&&(t=C),_=C+1);v=t>=0?t:p.length-1;var B=t>=0?o(p,t,_):[],M=o(p,0,v),A=o(p,Math.max(_,v),p.length);return new x(M,B,A,[])}function y(i,p){for(var t=d.splitOnPattern(i,c),_=d.splitOnPattern(p,c),v=-1,C=-1,B=0;B<t.length-1;B++)m(t[B])&&(v<0&&(v=B),C=B+1);var M=v>=0?o(t,0,C):[],A=_,Q=o(t,Math.max(C,0));return new x(A,M,Q,[])}function o(i,p,t){for(var _=[],v=p;v<(t===void 0?i.length:t);v++)_.push(i[v]);return _}function e(i,p,t){for(var _=d.splitOnPattern(i,c),v=d.splitOnPattern(t,c),C=d.splitOnPattern(p,c),B=-1,M=-1,A=0;A<_.length-1;A++)m(_[A])&&(B<0&&(B=A),M=A+1);var Q=B>=0?o(_,0,M):[],X=o(_,Math.max(M,0));return new x(v,Q,X,C)}function s(i){var p=d.splitOnComma(i);switch(p.length){case 1:return $(p[0]);case 2:return y(u(p[0]),u(p[1]));case 3:return e(u(p[0]),u(p[1]),u(p[2]));default:throw new Error("Could not parse author name: partitioned as "+JSON.stringify(p)+" in "+JSON.stringify(i))}}function r(i){return i!==void 0}function u(i){if(r(i))return i;throw new Error("???????")}Object.defineProperty(n,"__esModule",{value:!0});var b=a(0),k=a(1),S=a(5),w=a(2),d=a(3),c=/\s+/g,x=function(){function i(p,t,_,v){this.firstNames$=p,this.vons$=t,this.lastNames$=_,this.jrs$=v,this.initials=p.map(l),this.firstNames=p.map(d.toStringBibStringData),this.vons=t.map(d.toStringBibStringData),this.lastNames=_.map(d.toStringBibStringData),this.jrs=v.map(d.toStringBibStringData),this.id=this.firstNames.join("-")+"-"+this.vons.join("-")+"-"+this.lastNames.join("-")+"-"+this.jrs.join("-")}return i}();n.AuthorName=x,n.parseAuthorName=s;var f=function(){function i(p,t,_){this.first=p,this.von=t,this.last=_}return i}();n.Authorrr=f},function(h,n,a){function l(S){return s.parseAuthorName(S)}function m(S){return e.isNumber(S)?g([S]):g(S.data,r.isOuterQuotedString(S))}function g(S,w){var d=b.globContiguousStrings(b.flattenQuotedStrings(S,w)),c=d.map(function(x){return b.isContiguousSimpleString(x)?b.joinContiguousSimpleStrings(x):x});return b.splitOnAnd(c)}function $(S){if(!y(S))throw new Error;return S}function y(S){return e.isArray(S.authors$)&&S.type==="authors"}var o=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,d){w.__proto__=d}||function(w,d){for(var c in d)d.hasOwnProperty(c)&&(w[c]=d[c])};return function(w,d){function c(){this.constructor=w}S(w,d),w.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var e=a(0),s=a(8),r=a(1),u=a(4),b=a(3),k=function(S){function w(d){var c=this,x=e.isNumber(d)?[d]:d.data;c=S.call(this,"authors",x)||this;var f=m(d);return c.authors$=f.map(function(i){return l(i)}),c}return o(w,S),w}(u.BibOuterStringComponent);n.Authors=k,n.determineAuthorNames$=m,n.mustBeAuthors=$,n.isAuthors=y},function(h,n,a){function l(e){return e.type==="comment"&&g.isArray(e.data)}function m(e){return g.flattenMyArray(e).map(o)}Object.defineProperty(n,"__esModule",{value:!0});var g=a(0),$=function(){function e(s){this.type="comment",this.data=s,this.string=s.join("")}return e.prototype.toString=function(){return this.string},e}();n.BibComment=$;var y=function(){function e(s,r){this.type=s,this.data=r,this.string=r.join("")}return e.prototype.toString=function(){return this.string},e}();n.CommentEntry=y,n.isBibComment=l;var o=function(e){return g.isString(e)?e:typeof e=="number"?e.toString():e.type==="@bib"?"@"+g.mustBeString(e.string):e.type==="escapedEntry"?"\\"+o(e.data):g.mustBeString(e.string)};n.flattenPlainText=m},function(h,n,a){function l(s){var r={};return Object.keys(s).forEach(function(u){r[u]=o.parseFieldValue(s[u])}),r}function m(s){return typeof s.type=="string"&&typeof s._id=="string"&&!!s.fields}function g(s,r){var u={},b=s.fields;return Object.keys(s.fields).forEach(function(k){var S=y.resolveStringReference({},u,r,b[k]);switch(k){case"author":u[k]=new $.Authors(S);break;case"title":u[k]=S;break;case"incollection":default:u[k]=S}}),new e(s.type,s._id,u)}Object.defineProperty(n,"__esModule",{value:!0});var $=a(9),y=a(7),o=a(6),e=function(){function s(r,u,b){this.type=r,this._id=u,this.fields=b,this.sortkey$="",this.title$=""}return s.prototype.getField=function(r){return this.fields[r.toLowerCase()]},s.prototype.getFieldAsString=function(r){var u=this.getField(r);return o.normalizeFieldValue(u)},s.prototype.getAuthors=function(){var r=this.fields.author;return r===void 0?r:$.mustBeAuthors(r)},s}();n.BibEntry=e,n.parseEntryFields=l,n.isBibEntry=m,n.processEntry=g},function(h,n,a){function l(o){return o.type==="preamble"&&!!o.data}function m(o){var e=$.parseBibEntriesAndNonEntries(g.mustBeArray(o.data));return new y(e)}Object.defineProperty(n,"__esModule",{value:!0});var g=a(0),$=a(13),y=function(){function o(e){this.type="preamble",this.data=e,this.string=e.join("")}return o.prototype.toString=function(){return this.string},o}();n.Preamble=y,n.isPreamble=l,n.newPreambleNode=m},function(h,n,a){function l(w){if(!o.isArray(w.data)||w.type!=="NON_ENTRY")throw new Error;return new r.BibComment(r.flattenPlainText(w.data))}function m(w){switch(typeof w){case"object":var d=w.data;if(typeof d["@type"]=="string")return new s.BibEntry(d["@type"],d._id,s.parseEntryFields(d.fields));switch(o.mustBeString(d.type)){case"string":return b.newStringEntry(d);case"preamble":return u.newPreambleNode(d);default:throw new Error("Unexpected entry parsed: "+d.type)}default:throw new Error("Expected object as data for entry")}}function g(w){var d=new $.Parser(y.grammar.ParserRules,y.grammar.ParserStart);d.feed(new k.default(w).readTokens());var c=d.results,x=c[0];return new S(n.parseBibEntriesAndNonEntries(x))}Object.defineProperty(n,"__esModule",{value:!0});var $=a(19),y=a(20),o=a(0),e=a(6),s=a(11),r=a(10),u=a(12),b=a(7),k=a(21),S=function(){function w(d){var c=this;this.content=d,this.comments=d.filter(r.isBibComment).map(function(i){if(r.isBibComment(i))return i;throw new Error}),this.preambles_raw=d.filter(function(i){return u.isPreamble(i)}).map(function(i){if(u.isPreamble(i))return i;throw new Error}),this.preamble$=this.preambles_raw.map(function(i){return i.toString()}).join(`
`);var x={};this.content.forEach(function(i){if(e.isKeyVal(i)){if(x[i.key])throw new Error("String with id "+i.key+" was defined more than once");x[i.key]=i.value}}),this.strings_raw=x,this.strings$=b.resolveStrings(x),this.entries_raw=d.filter(function(i){return s.isBibEntry(i)}).map(function(i){if(s.isBibEntry(i))return i;throw new Error});var f={};this.entries_raw.forEach(function(i){var p=i._id.toLowerCase();if(f[p])throw new Error("Entry with id "+p+" was defined more than once");f[p]=s.processEntry(i,c.strings$)}),this.entries$=f}return w.prototype.getEntry=function(d){return this.entries$[d.toLowerCase()]},w}();n.BibFilePresenter=S,n.parseBibEntriesAndNonEntries=function(w){return w.map(function(d){switch(d.type){case"NON_ENTRY":return l(d);case"ENTRY":return m(d);default:throw new Error("Expected ENTRY or NON_ENTRY")}})},n.parseBibFile=g},function(h,n,a){function l($,y){return{type:$,string:y}}function m($){return n.specialChars.hasOwnProperty($)}function g($){return n.escapableChars.hasOwnProperty($)}Object.defineProperty(n,"__esModule",{value:!0}),n.newToken=l,n.specialChars={"@":!0,"(":!0,")":!0,"{":!0,"}":!0,"#":!0,"=":!0,",":!0,"\\":!0,'"':!0},n.isSpecialChar=m,n.escapableChars={"\\":!0,"@":!0,"{":!0,"}":!0},n.isEscapableChar=g},function(h,n,a){function l($){return{type:"ws",string:$}}function m($){return typeof $.string=="string"&&$.type===n.WS}function g($){return n.singleWhitespaces.hasOwnProperty($)}Object.defineProperty(n,"__esModule",{value:!0}),n.WS="ws",n.newWhitespace=l,n.isWhitespace=m,n.singleWhitespaces={" ":!0,"	":!0,"\r":!0,"\n":!0},n.isSingleWhiteSpaceCharacter=g},function(h,n,a){function l(g){return{type:"number",string:g}}function m(g){return n.numericChars.hasOwnProperty(g)}Object.defineProperty(n,"__esModule",{value:!0}),n.newNumber=l,n.numericChars={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},n.isNum=m},function(h,n,a){function l(m){for(var g in m)n.hasOwnProperty(g)||(n[g]=m[g])}Object.defineProperty(n,"__esModule",{value:!0}),l(a(8)),l(a(9)),l(a(18)),l(a(10)),l(a(11)),l(a(12)),l(a(7)),l(a(3)),l(a(4)),l(a(2)),l(a(1)),l(a(5)),l(a(6)),l(a(13)),l(a(0))},function(h,n,a){function l(o){return n.optionalFields.hasOwnProperty(o)}function m(o){return n.mandatoryFields.hasOwnProperty(o)}function g(o){return m(o)?n.mandatoryFields[o]:[]}function $(o){return l(o)?n.optionalFields[o]:[]}Object.defineProperty(n,"__esModule",{value:!0});var y=a(0);n.address="address",n.author="author",n.booktitle="booktitle",n.chapter="chapter",n.edition="edition",n.editor="editor",n.howpublished="howpublished",n.institution="institution",n.journal="journal",n.month="month",n.note="note",n.number="number",n.organization="organization",n.pages="pages",n.publisher="publisher",n.school="school",n.series="series",n.title="title",n.type="type",n.volume="volume",n.year="year",n.optionalFields={book:[["volume","number"],"series","address","edition","month","note"],booklet:["author","howpublished","address","address","month","year","note"],conference:["editor",["volume","number"],"series","pages","address","month","organization","publisher","note"],inproceedings:["editor",["volume","number"],n.series,"pages","address","month","organization","publisher","note"],inbook:["volume","number","series","type","address","edition","month","note"],incollection:["editor",["volume","number"],"series","type","chapter","pages","address","edition","month","note"],manual:["author","organization","year","address","edition","month","note"],mastersthesis:["type","address","month","note"],misc:[],phdthesis:["type","address","month","note"],proceedings:["editor",["volume","number"],"series","address","month","organization","publisher","note"],techreport:["type","address","number","month","note"],unpublished:["month","year"]},n.mandatoryFields={article:["author","title","year","journal"],book:[["author","editor"],"title","publisher","year"],booklet:["title"],conference:["author","title","booktitle","year"],inproceedings:["author","title","booktitle","year"],inbook:[["author","editor"],"title",["chapter","pages"]],incollection:["author","title","booktitle","publisher","year"],manual:["title"],mastersthesis:["author","title","school","year"],misc:[["author","title","howpublished","year","month","note"]],phdthesis:["author","title","school","year"],proceedings:["year","title"],techreport:["author","title","institution","year"],unpublished:["author","title","note"]},n.hasOptionalFields=l,n.hasMandatoryFields=m,n.getMandatoryFields=g,n.getOptionalFields=$,n.findError=function(o,e){var s=o.fields;if(y.isString(e)){if(!s[e])return new Error("Warning: expected "+o.type+" with id "+o._id+" to have the field: "+e)}else if(y.isArray(e)){var r=e.reduce(function(u,b){if(y.isString(b))return u&&s.hasOwnProperty(b);throw new Error},!0);if(!r)return new Error("Expected "+o.type+" with id "+o._id+" to have one of the following fields: "+e)}}},function(h,n){(function(a,l){typeof h=="object"&&h.exports?h.exports=l():a.nearley=l()})(this,function(){function a(o,e,s){return this.id=++a.highestId,this.name=o,this.symbols=e,this.postprocess=s,this}function l(o,e,s,r){this.rule=o,this.dot=e,this.reference=s,this.data=[],this.wantedBy=r,this.isComplete=this.dot===o.symbols.length}function m(o,e){this.grammar=o,this.index=e,this.states=[],this.wants={},this.scannable=[],this.completed={}}function g(o,e){this.rules=o,this.start=e||this.rules[0].name;var s=this.byName={};this.rules.forEach(function(r){s.hasOwnProperty(r.name)||(s[r.name]=[]),s[r.name].push(r)})}function $(){this.reset("")}function y(o,e,r){if(o instanceof g)var u=o,r=e;else var u=g.fromCompiled(o,e);this.grammar=u,this.options={keepHistory:!1,lexer:u.lexer||new $};for(var b in r||{})this.options[b]=r[b];this.lexer=this.options.lexer,this.lexerState=void 0;var k=new m(u,0);this.table=[k],k.wants[u.start]=[],k.predict(u.start),k.process(),this.current=0}return a.highestId=0,a.prototype.toString=function(o){function e(r){return r.literal?JSON.stringify(r.literal):r.type?"%"+r.type:r.toString()}var s=o===void 0?this.symbols.map(e).join(" "):this.symbols.slice(0,o).map(e).join(" ")+" ● "+this.symbols.slice(o).map(e).join(" ");return this.name+" → "+s},l.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},l.prototype.nextState=function(o){var e=new l(this.rule,this.dot+1,this.reference,this.wantedBy);return e.left=this,e.right=o,e.isComplete&&(e.data=e.build()),e},l.prototype.build=function(){var o=[],e=this;do o.push(e.right.data),e=e.left;while(e.left);return o.reverse(),o},l.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,y.fail))},m.prototype.process=function(o){for(var e=this.states,s=this.wants,r=this.completed,u=0;u<e.length;u++){var b=e[u];if(b.isComplete){if(b.finish(),b.data!==y.fail){for(var k=b.wantedBy,S=k.length;S--;){var w=k[S];this.complete(w,b)}if(b.reference===this.index){var d=b.rule.name;(this.completed[d]=this.completed[d]||[]).push(b)}}}else{var d=b.rule.symbols[b.dot];if(typeof d!="string"){this.scannable.push(b);continue}if(s[d]){if(s[d].push(b),r.hasOwnProperty(d))for(var c=r[d],S=0;S<c.length;S++){var x=c[S];this.complete(b,x)}}else s[d]=[b],this.predict(d)}}},m.prototype.predict=function(o){for(var e=this.grammar.byName[o]||[],s=0;s<e.length;s++){var r=e[s],u=this.wants[o],b=new l(r,0,this.index,u);this.states.push(b)}},m.prototype.complete=function(o,e){var s=e.rule.name;if(o.rule.symbols[o.dot]===s){var r=o.nextState(e);this.states.push(r)}},g.fromCompiled=function(r,e){var s=r.Lexer;r.ParserStart&&(e=r.ParserStart,r=r.ParserRules);var r=r.map(function(b){return new a(b.name,b.symbols,b.postprocess)}),u=new g(r,e);return u.lexer=s,u},$.prototype.reset=function(o,e){this.buffer=o,this.index=0,this.line=e?e.line:1,this.lastLineBreak=e?-e.col:0},$.prototype.next=function(){if(this.index<this.buffer.length){var o=this.buffer[this.index++];return o===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:o}}},$.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},$.prototype.formatError=function(o,e){var s=this.buffer;if(typeof s=="string"){var r=s.indexOf(`
`,this.index);r===-1&&(r=s.length);var u=s.substring(this.lastLineBreak,r),b=this.index-this.lastLineBreak;return e+=" at line "+this.line+" col "+b+`:

`,e+="  "+u+`
`,e+="  "+Array(b).join(" ")+"^"}return e+" at index "+(this.index-1)},y.fail={},y.prototype.feed=function(o){var e=this.lexer;e.reset(o,this.lexerState);for(var s;s=e.next();){var r=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var u=this.current+1,b=new m(this.grammar,u);this.table.push(b);for(var k=s.value,S=e.constructor===$?s.value:s,w=r.scannable,d=w.length;d--;){var c=w[d],x=c.rule.symbols[c.dot];if(x.test?x.test(S):x.type?x.type===s.type:x.literal===k){var f=c.nextState({data:S,token:s,isToken:!0,reference:u-1});b.states.push(f)}}if(b.process(),b.states.length===0){var i=this.lexer.formatError(s,"invalid syntax")+`
`;i+="Unexpected "+(s.type?s.type+" token: ":""),i+=JSON.stringify(s.value!==void 0?s.value:s)+`
`;var p=new Error(i);throw p.offset=this.current,p.token=s,p}this.options.keepHistory&&(r.lexerState=e.save()),this.current++}return r&&(this.lexerState=e.save()),this.results=this.finish(),this},y.prototype.save=function(){var o=this.table[this.current];return o.lexerState=this.lexerState,o},y.prototype.restore=function(o){var e=o.index;this.current=e,this.table[e]=o,this.table.splice(e+1),this.lexerState=o.lexerState,this.results=this.finish()},y.prototype.rewind=function(o){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[o])},y.prototype.finish=function(){var o=[],e=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(s){s.rule.name===e&&s.dot===s.rule.symbols.length&&s.reference===0&&s.data!==y.fail&&o.push(s)}),o.map(function(s){return s.data})},{Parser:y,Grammar:g,Rule:a}})},function(h,n,a){function l(t){return t[0]}function m(t,_){if(_.type!=="keyval")throw new Error("Expected a keyval object");var v=_.key.toLowerCase();return t.fields[v]?void 0:(t.fields[v]=_.value,t)}function g(t){for(var _=[],v=0;v<t.length;v++)if(typeof t[v]=="object"){if(!t[v].string)throw new Error("Expected token to have a string field called 'string' in object "+JSON.stringify(t[v]));_.push(t[v].string)}else{if(typeof t[v]!="string"&&typeof t[v]!="number")throw new Error("Could not handle token "+JSON.stringify(t[v])+" in array "+JSON.stringify(t));_.push(t[v])}return _.join("")}Object.defineProperty(n,"__esModule",{value:!0});var $=function(t){return t.constructor===Number||typeof t=="object"&&t.type==="number"},y={test:function(t){return typeof t=="object"&&t.type==="id"}},o={test:function(t){return typeof t=="object"&&t.type==="@bib"}},e={test:function(t){return typeof t=="object"&&t.type==="@string"}},s={test:function(t){return typeof t=="object"&&t.type==="@preamble"}},r={test:function(t){return typeof t=="object"&&t.type==="@comment"}},u={test:function(t){return typeof t=="object"&&t.type==="ws"}},b={test:$},k={literal:"#"},S={literal:"="},w={literal:"\\"},d={literal:"("},c={literal:")"},x={literal:"{"},f={literal:"}"},i={literal:'"'},p={literal:","};n.grammar={Lexer:void 0,ParserRules:[{name:"main$ebnf$1",symbols:["non_entry"],postprocess:l},{name:"main$ebnf$1",symbols:[],postprocess:function(){}},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["non_entry"],postprocess:l},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:function(){}},{name:"main$ebnf$2$subexpression$1",symbols:["entry","main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"main",symbols:["main$ebnf$1","main$ebnf$2"],postprocess:function(t){var _=[];t[0]&&_.push({type:"NON_ENTRY",data:t[0]});for(var v=0;v<t[1].length;v++)_.push({type:"ENTRY",data:t[1][v][0]}),t[1][v][1]&&_.push({type:"NON_ENTRY",data:t[1][v][1]});return _}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",u],postprocess:function(t){return t[0].concat([t[1]])}},{name:"_",symbols:["_$ebnf$1"]},{name:"entry_decl$subexpression$1",symbols:[o]},{name:"entry_decl$subexpression$1",symbols:[e]},{name:"entry_decl$subexpression$1",symbols:[s]},{name:"entry_decl$subexpression$1",symbols:[r]},{name:"entry_decl",symbols:["entry_decl$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"entry$subexpression$1",symbols:["bib_entry"]},{name:"entry$subexpression$1",symbols:["string_entry"]},{name:"entry$subexpression$1",symbols:["preamble_entry"]},{name:"entry$subexpression$1",symbols:["comment_entry"]},{name:"entry",symbols:["entry$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"comment",symbols:["main"],postprocess:function(t){return t[0]}},{name:"comment_liberal$ebnf$1",symbols:[]},{name:"comment_liberal$ebnf$1$subexpression$1",symbols:[/./]},{name:"comment_liberal$ebnf$1",symbols:["comment_liberal$ebnf$1","comment_liberal$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"comment_liberal",symbols:["comment_liberal$ebnf$1"],postprocess:function(t){for(var _=[],v=0;v<t[0].length;v++)_.push(t[0][v][0]);return _}},{name:"entry_body_comment$subexpression$1$macrocall$2",symbols:["comment"]},{name:"entry_body_comment$subexpression$1$macrocall$1",symbols:[d,"entry_body_comment$subexpression$1$macrocall$2",c],postprocess:function(t){return t[1]}},{name:"entry_body_comment$subexpression$1",symbols:["entry_body_comment$subexpression$1$macrocall$1"]},{name:"entry_body_comment$subexpression$1$macrocall$4",symbols:["comment"]},{name:"entry_body_comment$subexpression$1$macrocall$3",symbols:[x,"entry_body_comment$subexpression$1$macrocall$4",f],postprocess:function(t){return t[1]}},{name:"entry_body_comment$subexpression$1",symbols:["entry_body_comment$subexpression$1$macrocall$3"]},{name:"entry_body_comment",symbols:["entry_body_comment$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"entry_body_string$subexpression$1$macrocall$2",symbols:["keyval"]},{name:"entry_body_string$subexpression$1$macrocall$1",symbols:[d,"_","entry_body_string$subexpression$1$macrocall$2","_",c],postprocess:function(t){return t[2]}},{name:"entry_body_string$subexpression$1",symbols:["entry_body_string$subexpression$1$macrocall$1"]},{name:"entry_body_string$subexpression$1$macrocall$4",symbols:["keyval"]},{name:"entry_body_string$subexpression$1$macrocall$3",symbols:[x,"_","entry_body_string$subexpression$1$macrocall$4","_",f],postprocess:function(t){return t[2]}},{name:"entry_body_string$subexpression$1",symbols:["entry_body_string$subexpression$1$macrocall$3"]},{name:"entry_body_string",symbols:["entry_body_string$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"entry_body_bib$subexpression$1$macrocall$2",symbols:["bib_content"]},{name:"entry_body_bib$subexpression$1$macrocall$1",symbols:[d,"_","entry_body_bib$subexpression$1$macrocall$2","_",c],postprocess:function(t){return t[2]}},{name:"entry_body_bib$subexpression$1",symbols:["entry_body_bib$subexpression$1$macrocall$1"]},{name:"entry_body_bib$subexpression$1$macrocall$4",symbols:["bib_content"]},{name:"entry_body_bib$subexpression$1$macrocall$3",symbols:[x,"_","entry_body_bib$subexpression$1$macrocall$4","_",f],postprocess:function(t){return t[2]}},{name:"entry_body_bib$subexpression$1",symbols:["entry_body_bib$subexpression$1$macrocall$3"]},{name:"entry_body_bib",symbols:["entry_body_bib$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"bib_content$ebnf$1",symbols:[]},{name:"bib_content$ebnf$1$subexpression$1",symbols:["keyval","_",p,"_"]},{name:"bib_content$ebnf$1",symbols:["bib_content$ebnf$1","bib_content$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"bib_content$ebnf$2$subexpression$1",symbols:["_",p]},{name:"bib_content$ebnf$2",symbols:["bib_content$ebnf$2$subexpression$1"],postprocess:l},{name:"bib_content$ebnf$2",symbols:[],postprocess:function(){}},{name:"bib_content",symbols:["key_string","_",p,"_","bib_content$ebnf$1","keyval","bib_content$ebnf$2"],postprocess:function(t){for(var _={_id:t[0],fields:[]},v=t[4],C=0;C<v.length;C++)_.fields.push(v[C][0]);return _.fields.push(t[5]),_}},{name:"bib_entry",symbols:[o,"_","entry_body_bib"],postprocess:function(t){var _={_id:t[2]._id};_["@type"]=t[0].string,_.fields={};for(var v=t[2].fields,C=0;C<v.length;C++)m(_,v[C]);return _}},{name:"string_entry",symbols:[e,"_","entry_body_string"],postprocess:function(t){return{type:"string",data:t[2]}}},{name:"preamble_entry",symbols:[s,"_","entry_body_comment"],postprocess:function(t){return{type:"preamble",data:t[2]}}},{name:"comment_entry",symbols:[r,"_","entry_body_comment"],postprocess:function(t){return{type:"comment",data:t[2]}}},{name:"keyval",symbols:["key_string","_",S,"_","value_string"],postprocess:function(t){return{type:"keyval",key:t[0],value:t[4]}}},{name:"braced_string$ebnf$1",symbols:[]},{name:"braced_string$ebnf$1$subexpression$1",symbols:["non_brace"]},{name:"braced_string$ebnf$1$subexpression$1",symbols:["braced_string"]},{name:"braced_string$ebnf$1",symbols:["braced_string$ebnf$1","braced_string$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"braced_string",symbols:[x,"braced_string$ebnf$1",f],postprocess:function(t){var _=[];for(var v in t[1])_.push(t[1][v][0]);return{type:"braced",data:_}}},{name:"quoted_string$ebnf$1",symbols:[]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["escaped_quote"]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["non_quote_non_brace"]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["braced_string"]},{name:"quoted_string$ebnf$1",symbols:["quoted_string$ebnf$1","quoted_string$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"quoted_string",symbols:[i,"quoted_string$ebnf$1",i],postprocess:function(t){var _=[];for(var v in t[1])_.push(t[1][v][0]);return{type:"quotedstring",data:_}}},{name:"escaped_quote",symbols:[w,i]},{name:"non_quote_non_brace$subexpression$1",symbols:[y]},{name:"non_quote_non_brace$subexpression$1",symbols:[o]},{name:"non_quote_non_brace$subexpression$1",symbols:[e]},{name:"non_quote_non_brace$subexpression$1",symbols:[s]},{name:"non_quote_non_brace$subexpression$1",symbols:[r]},{name:"non_quote_non_brace$subexpression$1",symbols:[u]},{name:"non_quote_non_brace$subexpression$1",symbols:[b]},{name:"non_quote_non_brace$subexpression$1",symbols:[k]},{name:"non_quote_non_brace$subexpression$1",symbols:[S]},{name:"non_quote_non_brace$subexpression$1",symbols:[w]},{name:"non_quote_non_brace$subexpression$1",symbols:[d]},{name:"non_quote_non_brace$subexpression$1",symbols:[c]},{name:"non_quote_non_brace$subexpression$1",symbols:[p]},{name:"non_quote_non_brace",symbols:["non_quote_non_brace$subexpression$1"]},{name:"key_string$ebnf$1",symbols:["stringreftoken"]},{name:"key_string$ebnf$1",symbols:["key_string$ebnf$1","stringreftoken"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"key_string",symbols:["key_string$ebnf$1"],postprocess:function(t){return g(t[0]).toLowerCase()}},{name:"value_string$subexpression$1$ebnf$1",symbols:[]},{name:"value_string$subexpression$1$ebnf$1$subexpression$1",symbols:["_",k,"_","quoted_string_or_ref"]},{name:"value_string$subexpression$1$ebnf$1",symbols:["value_string$subexpression$1$ebnf$1","value_string$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"value_string$subexpression$1",symbols:["quoted_string_or_ref","value_string$subexpression$1$ebnf$1"]},{name:"value_string$subexpression$1",symbols:["braced_string"]},{name:"value_string",symbols:["value_string$subexpression$1"],postprocess:function(t){var _=t[0];if(_.length===2){var v=[];v.push(_[0]);for(var C=0;C<_[1].length;C++)v.push(_[1][C][3]);return{type:"quotedstringwrapper",data:v}}if(_[0].type==="braced")return{type:"bracedstringwrapper",data:_[0].data};throw new Error("Don't know how to handle value "+JSON.stringify(_[0]))}},{name:"quoted_string_or_ref$subexpression$1",symbols:["quoted_string"]},{name:"quoted_string_or_ref$subexpression$1",symbols:["string_ref"]},{name:"quoted_string_or_ref$subexpression$1",symbols:[b]},{name:"quoted_string_or_ref",symbols:["quoted_string_or_ref$subexpression$1"],postprocess:function(t){return t[0][0].type,t[0][0]}},{name:"string_ref$subexpression$1$ebnf$1",symbols:[]},{name:"string_ref$subexpression$1$ebnf$1",symbols:["string_ref$subexpression$1$ebnf$1","stringreftoken"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"string_ref$subexpression$1",symbols:["stringreftoken_n_num","string_ref$subexpression$1$ebnf$1"]},{name:"string_ref",symbols:["string_ref$subexpression$1"],postprocess:function(t){return{stringref:t[0][0]+g(t[0][1])}}},{name:"stringreftoken$subexpression$1",symbols:[w]},{name:"stringreftoken$subexpression$1",symbols:[d]},{name:"stringreftoken$subexpression$1",symbols:[c]},{name:"stringreftoken$subexpression$1",symbols:[y]},{name:"stringreftoken$subexpression$1",symbols:[b]},{name:"stringreftoken$subexpression$1",symbols:[o]},{name:"stringreftoken$subexpression$1",symbols:[e]},{name:"stringreftoken$subexpression$1",symbols:[s]},{name:"stringreftoken$subexpression$1",symbols:[r]},{name:"stringreftoken",symbols:["stringreftoken$subexpression$1"],postprocess:function(t){if(typeof t[0][0]=="object"){if(!t[0][0].string)throw new Error("Expected "+t[0]+"to have a 'string' field");return t[0][0].string}if(typeof t[0][0]!="string"&&typeof t[0][0]!="number")throw new Error("Expected "+t[0][0]+" to be a string");return t[0][0]}},{name:"stringreftoken_n_num$subexpression$1",symbols:[w]},{name:"stringreftoken_n_num$subexpression$1",symbols:[d]},{name:"stringreftoken_n_num$subexpression$1",symbols:[c]},{name:"stringreftoken_n_num$subexpression$1",symbols:[y]},{name:"stringreftoken_n_num$subexpression$1",symbols:[o]},{name:"stringreftoken_n_num$subexpression$1",symbols:[e]},{name:"stringreftoken_n_num$subexpression$1",symbols:[s]},{name:"stringreftoken_n_num$subexpression$1",symbols:[r]},{name:"stringreftoken_n_num",symbols:["stringreftoken_n_num$subexpression$1"],postprocess:function(t){if(typeof t[0][0]=="object"){if(!t[0][0].string)throw new Error("Expected "+t[0]+"to have a 'string' field");return t[0][0].string}if(typeof t[0][0]!="string"&&typeof t[0][0]!="number")throw new Error("Expected "+t[0][0]+" to be a string");return t[0][0]}},{name:"non_brace$subexpression$1",symbols:[w]},{name:"non_brace$subexpression$1",symbols:[d]},{name:"non_brace$subexpression$1",symbols:[c]},{name:"non_brace$subexpression$1",symbols:[y]},{name:"non_brace$subexpression$1",symbols:[i]},{name:"non_brace$subexpression$1",symbols:[u]},{name:"non_brace$subexpression$1",symbols:[b]},{name:"non_brace$subexpression$1",symbols:[p]},{name:"non_brace$subexpression$1",symbols:[o]},{name:"non_brace$subexpression$1",symbols:[e]},{name:"non_brace$subexpression$1",symbols:[s]},{name:"non_brace$subexpression$1",symbols:[r]},{name:"non_brace$subexpression$1",symbols:[k]},{name:"non_brace$subexpression$1",symbols:[S]},{name:"non_brace",symbols:["non_brace$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"non_bracket$subexpression$1",symbols:[w]},{name:"non_bracket$subexpression$1",symbols:[y]},{name:"non_bracket$subexpression$1",symbols:[i]},{name:"non_bracket$subexpression$1",symbols:[u]},{name:"non_bracket$subexpression$1",symbols:[b]},{name:"non_bracket$subexpression$1",symbols:[p]},{name:"non_bracket$subexpression$1",symbols:[o]},{name:"non_bracket$subexpression$1",symbols:[e]},{name:"non_bracket$subexpression$1",symbols:[s]},{name:"non_bracket$subexpression$1",symbols:[r]},{name:"non_bracket$subexpression$1",symbols:[k]},{name:"non_bracket$subexpression$1",symbols:[S]},{name:"non_bracket",symbols:["non_bracket$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_entry"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_escape"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_non_esc_outside_entry"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["non_esc_outside_entry"]},{name:"non_entry$ebnf$1",symbols:["non_entry$ebnf$1$subexpression$1"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_entry"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_escape"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_non_esc_outside_entry"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["non_esc_outside_entry"]},{name:"non_entry$ebnf$1",symbols:["non_entry$ebnf$1","non_entry$ebnf$1$subexpression$2"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"non_entry",symbols:["non_entry$ebnf$1"],postprocess:function(t){for(var _=[],v=0;v<t[0].length;v++)_.push(t[0][v][0]);return _}},{name:"escaped_escape",symbols:[w,w],postprocess:function(){return"\\"}},{name:"escaped_entry",symbols:[w,"entry_decl"],postprocess:function(t){return{type:"escapedEntry",data:t[1]}}},{name:"escaped_non_esc_outside_entry",symbols:[w,"non_esc_outside_entry"],postprocess:function(t){return t}},{name:"non_esc_outside_entry$subexpression$1",symbols:[y]},{name:"non_esc_outside_entry$subexpression$1",symbols:[u]},{name:"non_esc_outside_entry$subexpression$1",symbols:[b]},{name:"non_esc_outside_entry$subexpression$1",symbols:[k]},{name:"non_esc_outside_entry$subexpression$1",symbols:[S]},{name:"non_esc_outside_entry$subexpression$1",symbols:[d]},{name:"non_esc_outside_entry$subexpression$1",symbols:[c]},{name:"non_esc_outside_entry$subexpression$1",symbols:[x]},{name:"non_esc_outside_entry$subexpression$1",symbols:[f]},{name:"non_esc_outside_entry$subexpression$1",symbols:[i]},{name:"non_esc_outside_entry$subexpression$1",symbols:[p]},{name:"non_esc_outside_entry",symbols:["non_esc_outside_entry$subexpression$1"],postprocess:function(t){return t[0][0]}}],ParserStart:"main"}},function(h,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(14),m=a(15),g=a(16),$=a(22),y=a(23),o=function(){function e(s){this.str=s,this.len=s.length,this.pos=0}return e.prototype.getStringUntilNonEscapedChar=function(s){for(var r=[],u=this.pos;u<this.len+1;u++){if(this.pos=u,this.str.charAt(u)=="\\"&&this.str.charAt(u+1).match(s))u++,this.pos=u;else if(this.str.charAt(u).match(s))break;r.push(this.str.charAt(u))}return r.join("")},e.prototype.readTokens=function(){for(var s,r=[];s=this.readNextToken();)r.push(s);return r},e.prototype.readNextToken=function(){if(!(this.pos>=this.str.length)){var s=this.str.charAt(this.pos);return m.isSingleWhiteSpaceCharacter(s)?this.eatWhiteSpace():l.isSpecialChar(s)?this.eatSpecialChars(s):g.isNum(s)?this.eatNumericString(s):this.eatIdString()}},e.prototype.eatIdString=function(){for(var s=[],r=this.pos,u=r;u<this.len+1;u++){this.pos=u;var b=this.str.charAt(u);if(!$.isIdChar(b))break;s.push(b)}return $.newIdToken(s.join("").trim())},e.prototype.eatNumericString=function(s){for(var r=[s],u=this.pos+1,b=u;b<this.len+1;b++){this.pos=b;var k=this.str.charAt(b);if(!g.isNum(k))break;r.push(k)}var S=r.join("");if(r[0]==="0")return g.newNumber(S);var w=Number.parseInt(S);return Number.isFinite(w)?w:g.newNumber(S)},e.prototype.eatSpecialChars=function(s){if(this.pos++,s==="@"){var r=this.getStringUntilNonEscapedChar("{").trim().toLowerCase();return y.isBibType(r)?l.newToken(y.bibTypes[r],r):l.newToken("@bib",r)}return s},e.prototype.eatWhiteSpace=function(){for(var s=[];this.pos<this.len+1;){var r=this.str.charAt(this.pos);if(!m.isSingleWhiteSpaceCharacter(r))break;s.push(r),this.pos++}return m.newWhitespace(s.join(""))},e}();n.default=o},function(h,n,a){function l(e){return{type:"id",string:e}}function m(e){return e.type==="id"&&typeof e.string=="string"}function g(e){return!($.isSpecialChar(e)||o.isNum(e)||y.isSingleWhiteSpaceCharacter(e))}Object.defineProperty(n,"__esModule",{value:!0});var $=a(14),y=a(15),o=a(16);n.newIdToken=l,n.isIdToken=m,n.isIdChar=g},function(h,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.bibTypes={string:"@string",preamble:"@preamble",comment:"@comment",bib:"@bib"},n.isBibType=function(l){return n.bibTypes.hasOwnProperty(l)}}])})})(Je);var Gt=Je.exports;const ce=E=>(ft("data-v-bb74227c"),E=E(),bt(),E),Zt=ce(()=>I("div",{class:"wrapper-background"},null,-1)),Xt={class:"wrapper-sketch"},en=ce(()=>I("div",{class:"wrapper-sketch-text-title"},"Publications",-1)),tn={class:"wrapper-sketch-text-subtitle"},nn={class:"wrapper-sketch-text-content"},sn=ce(()=>I("h2",null,"Click to jump the year",-1)),rn={class:"publications-papers-card-title"},on={class:"publications-papers-card-authors"},an={class:"publications-papers-card-journal"},un={class:"publications-papers-card-abstract"},cn=V({__name:"Publications",setup(E){const O=J(lt()),h=J();h.value=document.body.clientWidth,window.onresize=()=>{h.value=document.body.clientWidth};function n(y){const o=document.getElementById(y);o&&o.scrollIntoView({block:"start",behavior:"smooth"})}const a=J(null),l=J([]),m=J([]);function g(y){const o={};return y.forEach(s=>{if(s.isShow!=="true")return;const r=new Date(s.date).getFullYear();o[r]||(o[r]={_id:r,papers:[],count:0,year:r}),o[r].papers.push(s),o[r].count+=1,o[r].papers.sort((u,b)=>new Date(b.date).getTime()-new Date(u.date).getTime())}),Object.values(o).sort((s,r)=>r.year-s.year)}De(async()=>{try{const o=await(await fetch("/jsons/04.publications.json")).json();a.value=o.basic;const s=await(await fetch("/assets/04.publications/papers.bib")).text(),r=Gt.parseBibFile(s);l.value=Object.values(r.entries$).map(u=>{var k,S,w,d,c,x,f,i,p,t,_,v,C,B,M,A,Q,X,le,pe,fe,be,me,de,ye,he,_e,ge,$e,ve,xe,we,Se,ke,Ee;const b=u.getField("author").data.join("").split(/\s+and\s+/i).map(Oe=>{const Ce=/^([^\s,]+)([†*]*),\s*([^\s,]+)/.exec(Oe);if(Ce){const[,Ve,He,Ue]=Ce;return`${Ue} ${Ve}${He}`.trim()}return Oe.trim()}).join(", ");return{isShow:((S=(k=u.getField("bibtex_show"))==null?void 0:k.data)==null?void 0:S.join(""))??"",date:`${((w=u.getField("year"))==null?void 0:w.data)??""}.${((d=u.getField("month"))==null?void 0:d.data)??""}.${((c=u.getField("day"))==null?void 0:c.data)??""}`,title:((f=(x=u.getField("title"))==null?void 0:x.data)==null?void 0:f.join(""))??"",authors:b,journal:((p=(i=u.getField("journal"))==null?void 0:i.data)==null?void 0:p.join(""))??"",abstract:((_=(t=u.getField("abstract"))==null?void 0:t.data)==null?void 0:_.join(""))??"",figure:((C=(v=u.getField("preview"))==null?void 0:v.data)==null?void 0:C.join(""))??"",keywords:((M=(B=u.getField("keywords"))==null?void 0:B.data)==null?void 0:M.join("").split(";"))??[],links:{"Google Scholar":((Q=(A=u.getField("google_scholar"))==null?void 0:A.data)==null?void 0:Q.join(""))??"",[`PMID:${((le=(X=u.getField("pmid"))==null?void 0:X.data)==null?void 0:le.join(""))??""}`]:[`https://pubmed.ncbi.nlm.nih.gov/${((fe=(pe=u.getField("pmid"))==null?void 0:pe.data)==null?void 0:fe.join(""))??""}`],[`DOI:${((me=(be=u.getField("doi"))==null?void 0:be.data)==null?void 0:me.join(""))??""}`]:[`https://doi.org/${((ye=(de=u.getField("doi"))==null?void 0:de.data)==null?void 0:ye.join(""))??""}`],Website:((_e=(he=u.getField("website"))==null?void 0:he.data)==null?void 0:_e.join(""))??"",HTML:(($e=(ge=u.getField("url"))==null?void 0:ge.data)==null?void 0:$e.join(""))??"","Chinese Report":((xe=(ve=u.getField("chinese_report"))==null?void 0:ve.data)==null?void 0:xe.join(""))??"",pdf:((Se=(we=u.getField("pdf"))==null?void 0:we.data)==null?void 0:Se.join(""))??""},citation:((Ee=(ke=u.getField("citation"))==null?void 0:ke.data)==null?void 0:Ee.join(""))??""}}),m.value=g(l.value)}catch(y){console.error("Failed to fetch jsons/04.publications.json:",y)}});function $(y){try{navigator.clipboard.writeText(y),Ae.success("Paper Citation Copied!")}catch(o){console.error("复制失败:",o),Ae.error("复制失败，请手动复制")}}return(y,o)=>{const e=mt,s=pt,r=Mt,u=gt,b=dt,k=yt("font-awesome-icon"),S=xt,w=ht,d=$t,c=vt;return T(),z(H,null,[Zt,I("div",Xt,[N(s,null,{default:P(()=>[N(e,{span:2}),N(e,{span:20},{default:P(()=>[N(s,null,{default:P(()=>[a.value?(T(),R(e,{key:0,class:"wrapper-sketch-text",span:h.value>1200?14:24},{default:P(()=>[en,I("div",tn,q(a.value.subtitle),1),I("h1",nn,q(a.value.slogan),1)]),_:1},8,["span"])):K("",!0)]),_:1})]),_:1}),N(e,{span:2})]),_:1})]),N(s,{class:"publications-wrap",style:ze({"background-color":O.value?"#131124":"#cdd1d3"})},{default:P(()=>[N(e,{span:2}),N(e,{span:20},{default:P(()=>[sn,(T(!0),z(H,null,Z(m.value,(x,f)=>(T(),R(r,{class:"publications-wrap-years",size:"large",effect:"plain",key:f,checked:"",onClick:i=>n(x.year)},{default:P(()=>[U(q(x.year),1)]),_:2},1032,["onClick"]))),128)),(T(!0),z(H,null,Z(m.value,(x,f)=>(T(),R(c,{id:x.year,class:"publications-papers",key:f},{default:P(()=>[N(u,{type:"success",size:"large",hollow:"true"},{default:P(()=>[I("h1",null,q(x.year)+" ("+q(x.count)+" total)",1)]),_:2},1024),(T(!0),z(H,null,Z(x.papers,(i,p)=>(T(),R(u,{key:p,timestamp:i.date,placement:"top",type:"success",size:"large",hollow:"true"},{default:P(()=>[N(d,{class:"publications-papers-card"},{default:P(()=>[N(s,null,{default:P(()=>[N(e,{span:h.value>1600?11:24},{default:P(()=>[i.figure?(T(),R(b,{key:0,style:{width:"100%","margin-bottom":"20px"},src:i.figure,"zoom-rate":1.2,"preview-src-list":[i.figure],"initial-index":4,"hide-on-click-modal":"true"},null,8,["src","zoom-rate","preview-src-list"])):K("",!0),(T(!0),z(H,null,Z(i.keywords,(t,_)=>ee((T(),R(S,{class:"publications-papers-card-tags",key:_},{default:P(()=>[N(k,{icon:["fas","tag"]}),U(" "+q(t),1)]),_:2},1024)),[[te,i.keywords[0]]])),128))]),_:2},1032,["span"]),N(e,{span:h.value>1600?12:24,offset:h.value>1600?1:0},{default:P(()=>[N(w,{underline:!1,target:"_blank",type:"primary",href:i.links.HTML},{default:P(()=>[I("span",rn,q(i.title),1)]),_:2},1032,["href"]),I("div",on,[N(k,{icon:"people-group"}),U(" "+q(i.authors),1)]),I("div",an,[N(k,{icon:"book"}),U(" "+q(i.journal),1)]),I("p",un,q(i.abstract),1),(T(!0),z(H,null,Z(i.links,(t,_,v)=>ee((T(),R(w,{class:"publications-papers-card-links",underline:!1,target:"_blank",type:"primary",key:v,href:t},{default:P(()=>[N(k,{icon:["fas","link"]}),U(" "+q(_),1)]),_:2},1032,["href"])),[[te,t]])),128)),N(w,{underline:!1,onClick:t=>$(i.citation)},{default:P(()=>[N(k,{icon:"quote-left"}),U(" "+q(i.citation),1)]),_:2},1032,["onClick"])]),_:2},1032,["span","offset"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:2},1032,["id"]))),128))]),_:1}),N(e,{span:2})]),_:1},8,["style"])],64)}}});const bn=_t(cn,[["__scopeId","data-v-bb74227c"]]);export{bn as default};
