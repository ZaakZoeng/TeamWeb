import{m as re,G as ie,d as H,H as ae,q as W,p as se,c as z,j as T,I as ue,b as N,w as P,J as te,a as R,t as q,v as j,L,O as ne,T as Me,V as qe,a0 as Ce,a1 as Re,a2 as Y,a3 as Ue,a4 as Ye,a5 as De,a6 as Ke,a7 as Ge,r as V,a8 as je,o as Ie,y as Ze,a9 as Xe,z as et,g as D,n as ze,h as K,M as Ne,aa as tt,F as J,K as nt,ab as rt,ac as st,ad as ot,C as Be,l as Le,ae as oe,af as it,ag as Pe,ah as at,ai as ut,u as ct,E as lt,f as pt,e as Z,Y as U,i as ft,Z as bt,X as mt,_ as dt}from"./index-7iwu9f3T.js";import{E as yt,a as ht,b as _t}from"./timeline-item-BUp7Eihx.js";import{E as $t}from"./tag-Lw3Hnhlf.js";const gt=re({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),vt=["textContent"],xt=H({name:"ElBadge"}),wt=H({...xt,props:gt,setup(E,{expose:C}){const _=E,n=ae("badge"),a=W(()=>_.isDot?"":se(_.value)&&se(_.max)?_.max<_.value?`${_.max}+`:`${_.value}`:`${_.value}`);return C({content:a}),(l,m)=>(T(),z("div",{class:L(j(n).b())},[ue(l.$slots,"default"),N(Me,{name:`${j(n).namespace.value}-zoom-in-center`,persisted:""},{default:P(()=>[te(R("sup",{class:L([j(n).e("content"),j(n).em("content",l.type),j(n).is("fixed",!!l.$slots.default),j(n).is("dot",l.isDot)]),textContent:q(j(a))},null,10,vt),[[ne,!l.hidden&&(j(a)||l.isDot)]])]),_:1},8,["name"])],2))}});var St=ie(wt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const kt=qe(St),Et=re({checked:{type:Boolean,default:!1}}),Ot={"update:checked":E=>Ce(E),[Re]:E=>Ce(E)},Ct=H({name:"ElCheckTag"}),jt=H({...Ct,props:Et,emits:Ot,setup(E,{emit:C}){const _=E,n=ae("check-tag"),a=()=>{const l=!_.checked;C(Re,l),C("update:checked",l)};return(l,m)=>(T(),z("span",{class:L([j(n).b(),j(n).is("checked",l.checked)]),onClick:a},[ue(l.$slots,"default")],2))}});var Nt=ie(jt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const Bt=qe(Nt),Te={};re({a11y:{type:Boolean,default:!0},locale:{type:Y(Object)},size:Ue,button:{type:Y(Object)},experimentalFeatures:{type:Y(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Y(Object)},zIndex:Number,namespace:{type:String,default:"el"}});const Qe=["success","info","warning","error"],M=Ye({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:De?document.body:void 0}),Pt=re({customClass:{type:String,default:M.customClass},center:{type:Boolean,default:M.center},dangerouslyUseHTMLString:{type:Boolean,default:M.dangerouslyUseHTMLString},duration:{type:Number,default:M.duration},icon:{type:Ke,default:M.icon},id:{type:String,default:M.id},message:{type:Y([String,Object,Function]),default:M.message},onClose:{type:Y(Function),required:!1},showClose:{type:Boolean,default:M.showClose},type:{type:String,values:Qe,default:M.type},offset:{type:Number,default:M.offset},zIndex:{type:Number,default:M.zIndex},grouping:{type:Boolean,default:M.grouping},repeatNum:{type:Number,default:M.repeatNum}}),Tt={destroy:()=>!0},I=Ge([]),At=E=>{const C=I.findIndex(a=>a.id===E),_=I[C];let n;return C>0&&(n=I[C-1]),{current:_,prev:n}},Ft=E=>{const{prev:C}=At(E);return C?C.vm.exposed.bottom.value:0},Mt=(E,C)=>I.findIndex(n=>n.id===E)>0?20:C,qt=["id"],Rt=["innerHTML"],Dt=H({name:"ElMessage"}),It=H({...Dt,props:Pt,emits:Tt,setup(E,{expose:C}){const _=E,{Close:n}=rt,a=ae("message"),l=V(),m=V(!1),$=V(0);let g;const y=W(()=>_.type?_.type==="error"?"danger":_.type:"info"),o=W(()=>{const c=_.type;return{[a.bm("icon",c)]:c&&je[c]}}),e=W(()=>_.icon||je[_.type]||""),r=W(()=>Ft(_.id)),s=W(()=>Mt(_.id,_.offset)+r.value),u=W(()=>$.value+s.value),b=W(()=>({top:`${s.value}px`,zIndex:_.zIndex}));function k(){_.duration!==0&&({stop:g}=st(()=>{w()},_.duration))}function S(){g==null||g()}function w(){m.value=!1}function d({code:c}){c===ot.esc&&w()}return Ie(()=>{k(),m.value=!0}),Ze(()=>_.repeatNum,()=>{S(),k()}),Xe(document,"keydown",d),et(l,()=>{$.value=l.value.getBoundingClientRect().height}),C({visible:m,bottom:u,close:w}),(c,x)=>(T(),D(Me,{name:j(a).b("fade"),onBeforeLeave:c.onClose,onAfterLeave:x[0]||(x[0]=f=>c.$emit("destroy")),persisted:""},{default:P(()=>[te(R("div",{id:c.id,ref_key:"messageRef",ref:l,class:L([j(a).b(),{[j(a).m(c.type)]:c.type&&!c.icon},j(a).is("center",c.center),j(a).is("closable",c.showClose),c.customClass]),style:ze(j(b)),role:"alert",onMouseenter:S,onMouseleave:k},[c.repeatNum>1?(T(),D(j(kt),{key:0,value:c.repeatNum,type:j(y),class:L(j(a).e("badge"))},null,8,["value","type","class"])):K("v-if",!0),j(e)?(T(),D(j(Ne),{key:1,class:L([j(a).e("icon"),j(o)])},{default:P(()=>[(T(),D(tt(j(e))))]),_:1},8,["class"])):K("v-if",!0),ue(c.$slots,"default",{},()=>[c.dangerouslyUseHTMLString?(T(),z(J,{key:1},[K(" Caution here, message could've been compromised, never use user's input as message "),R("p",{class:L(j(a).e("content")),innerHTML:c.message},null,10,Rt)],2112)):(T(),z("p",{key:0,class:L(j(a).e("content"))},q(c.message),3))]),c.showClose?(T(),D(j(Ne),{key:2,class:L(j(a).e("closeBtn")),onClick:nt(w,["stop"])},{default:P(()=>[N(j(n))]),_:1},8,["class","onClick"])):K("v-if",!0)],46,qt),[[ne,m.value]])]),_:3},8,["name","onBeforeLeave"]))}});var zt=ie(It,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Lt=1;const We=E=>{const C=!E||Be(E)||Le(E)||oe(E)?{message:E}:E,_={...M,...C};if(!_.appendTo)_.appendTo=document.body;else if(Be(_.appendTo)){let n=document.querySelector(_.appendTo);at(n)||(n=document.body),_.appendTo=n}return _},Qt=E=>{const C=I.indexOf(E);if(C===-1)return;I.splice(C,1);const{handler:_}=E;_.close()},Wt=({appendTo:E,...C},_)=>{const{nextZIndex:n}=it(),a=`message_${Lt++}`,l=C.onClose,m=document.createElement("div"),$={...C,zIndex:n()+C.zIndex,id:a,onClose:()=>{l==null||l(),Qt(e)},onDestroy:()=>{Pe(null,m)}},g=N(zt,$,oe($.message)||Le($.message)?{default:oe($.message)?$.message:()=>$.message}:null);g.appContext=_||G._context,Pe(g,m),E.appendChild(m.firstElementChild);const y=g.component,e={id:a,vnode:g,vm:y,handler:{close:()=>{y.exposed.visible.value=!1}},props:g.component.props};return e},G=(E={},C)=>{if(!De)return{close:()=>{}};if(se(Te.max)&&I.length>=Te.max)return{close:()=>{}};const _=We(E);if(_.grouping&&I.length){const a=I.find(({vnode:l})=>{var m;return((m=l.props)==null?void 0:m.message)===_.message});if(a)return a.props.repeatNum+=1,a.props.type=_.type,a.handler}const n=Wt(_,C);return I.push(n),n.handler};Qe.forEach(E=>{G[E]=(C={},_)=>{const n=We(C);return G({...n,type:E},_)}});function Vt(E){for(const C of I)(!E||E===C.props.type)&&C.handler.close()}G.closeAll=Vt;G._context=null;const Ae=ut(G,"$message");var ee={exports:{}},Jt=ee.exports,Fe;function Ht(){return Fe||(Fe=1,function(E,C){(function(_,n){E.exports=n()})(Jt,function(){return function(_){function n(l){if(a[l])return a[l].exports;var m=a[l]={i:l,l:!1,exports:{}};return _[l].call(m.exports,m,m.exports,n),m.l=!0,m.exports}var a={};return n.m=_,n.c=a,n.d=function(l,m,$){n.o(l,m)||Object.defineProperty(l,m,{configurable:!1,enumerable:!0,get:$})},n.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(m,"a",m),m},n.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},n.p="",n(n.s=17)}([function(_,n,a){function l(e,r){if(typeof e!="string")throw new Error("Expected to be string: "+JSON.stringify(r||e));return e}function m(e,r){if(e===void 0)throw new Error("Expected to be defined: "+JSON.stringify(r||e));return e}function $(e,r){if(!g(e))throw new Error("Expected to be array: "+JSON.stringify(r||e));return e}function g(e){return!!e&&e.constructor===Array}function y(e){return typeof e=="number"}function o(e){return typeof e=="string"}Object.defineProperty(n,"__esModule",{value:!0}),n.mustBeString=l,n.mustBeDefined=m,n.mustBeArray=$,n.isArray=g,n.isNumber=y,n.isString=o,n.flattenMyArray=function(e,r){r||(r=[]);for(var s=0,u=e.length;s<u;s++){var b=e[s];if(Array.isArray(b))for(var k=0,S=b.length;k<S;k++){var w=b[k];Array.isArray(w)?n.flattenMyArray(w,r):r.push(w)}else r.push(b)}return r}},function(_,n,a){function l(e){return e.type==="quotedstringwrapper"}function m(e){return e.type==="quotedstring"}var $=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var u in s)s.hasOwnProperty(u)&&(r[u]=s[u])};return function(r,s){function u(){this.constructor=r}e(r,s),r.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var g=a(4),y=function(e){function r(s,u){return e.call(this,"quotedstring",s,u)||this}return $(r,e),r}(g.BibStringComponent);n.QuotedString=y;var o=function(e){function r(s){return e.call(this,"quotedstringwrapper",s)||this}return $(r,e),r}(g.BibOuterStringComponent);n.OuterQuotedString=o,n.isOuterQuotedString=l,n.isQuotedString=m},function(_,n,a){function l(e){return e.type==="bracedstringwrapper"}function m(e){return e.type==="bracedstring"}var $=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var u in s)s.hasOwnProperty(u)&&(r[u]=s[u])};return function(r,s){function u(){this.constructor=r}e(r,s),r.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var g=a(4),y=function(e){function r(s,u){var b=e.call(this,"bracedstring",s,u)||this;return b.isSpecialCharacter=s===0&&u[0]==="\\",b}return $(r,e),r}(g.BibStringComponent);n.BracedString=y;var o=function(e){function r(s){return e.call(this,"bracedstringwrapper",s)||this}return $(r,e),r}(g.BibOuterStringComponent);n.OuterBracedString=o,n.isOuterBracedString=l,n.isBracedString=m},function(_,n,a){function l(f){return typeof f.braceDepth=="number"&&typeof f.type=="string"}function m(f){return f.type==="ContiguousSimpleString"&&c.isArray(f.data)}function $(f){return f.data.join("")}function g(f,i){if(c.isNumber(i)||c.isString(i))return i;if(S.isStringRef(i))return new S.StringRef(0,i.stringref);switch(c.mustBeString(i.type,i)){case"id":case"ws":case"number":return c.mustBeString(i.string);case"bracedstring":case"braced":if(!c.isArray(i.data))throw new Error("Expect array for data: "+JSON.stringify(i));return new w.BracedString(f,c.flattenMyArray(i.data).map(function(t){return g(f+1,t)}));case"quotedstring":if(!c.isArray(i.data))throw new Error("Expect array for data: "+JSON.stringify(i));var p=c.flattenMyArray(i.data);return new d.QuotedString(f,p.map(function(t){return g(f,t)}));default:throw new Error("Unexpected complex string type: "+i.type)}}function y(f){if(c.isString(f))return f;if(c.isNumber(f))return f+"";if(w.isBracedString(f)||d.isQuotedString(f)||d.isOuterQuotedString(f)||w.isOuterBracedString(f))return o(f.data);throw new Error(JSON.stringify(f))}function o(f){return f.map(y).join("")}function e(f,i){for(var p=[],t=0,h=f;t<h.length;t++){var v=h[t],O=r(v,i);c.isArray(O)?p=p.concat(O):p.push(O)}return p}function r(f,i){if(w.isBracedString(f))return f;if(d.isQuotedString(f)){var p=e(f.data,!0);return c.isArray(p)?i?p:x.concat(p).concat(x):i?p:['"',p,'"']}if(d.isOuterQuotedString(f))return e(f.data,!0);if(w.isOuterBracedString(f))return e(f.data,!1);if(c.isString(f)||c.isNumber(f))return f;throw S.isStringRef(f)?new Error("StringRef should be resolved at this point!"):new Error}function s(f){for(var i=[],p=0,t=f;p<t.length;p++){var h=t[p];if(c.isString(h)||c.isNumber(h))if(i.length<=0){var v={type:"ContiguousSimpleString",data:[h]};i.push(v)}else{var O=i[i.length-1];if(m(O))O.data.push(h);else{var v={type:"ContiguousSimpleString",data:[h]};i.push(v)}}else i.push(h)}return i}function u(f){return k(f,/\s+and\s+/g)}function b(f,i){return i===void 0&&(i=2),k(f,/\s*,\s*/g,i)}function k(f,i,p){for(var t=[],h=[],v=0,O=f;v<O.length;v++){var B=O[v];if(c.isString(B)&&(p===void 0||p>0)){var F=i.exec(B),A=0;if(F){do{var Q=A;A=F.index+F[0].length,h.push(B.substring(Q,F.index)),(p===void 0||p>0)&&(t.push(h),h=[],p!==void 0&&p>0&&p--),F=p===void 0||p>0?i.exec(B):void 0}while(F);A>0&&A<B.length&&h.push(B.substring(A))}else h.push(B)}else h.push(B)}return h.length>0&&t.push(h),t}Object.defineProperty(n,"__esModule",{value:!0});var S=a(5),w=a(2),d=a(1),c=a(0);n.isBibStringComponent=l,n.isContiguousSimpleString=m,n.joinContiguousSimpleStrings=$,n.parseStringComponent=g,n.toStringBibStringDatum=y,n.toStringBibStringData=o,n.flattenQuotedStrings=e;var x=['"'];n.globContiguousStrings=s,n.splitOnAnd=u,n.splitOnComma=b,n.splitOnPattern=k},function(_,n,a){var l=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r])};return function(o,e){function r(){this.constructor=o}y(o,e),o.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var m=a(0),$=function(){function y(o,e,r){this.type=o,this.braceDepth=e,this.data=r}return y.isBibStringComponent=function(o){return typeof o.braceDepth=="number"&&typeof o.type=="string"},y.stringifyDatum=function(o){if(m.isString(o))return o;if(m.isNumber(o))return o.toString();if(y.isBibStringComponent(o))return o.stringify();throw new Error("Unexpected state")},y.prototype.stringify=function(){return this.data.map(y.stringifyDatum).join("")},y}();n.BibStringComponent=$;var g=function(y){function o(e,r){return y.call(this,e,0,r)||this}return l(o,y),o}($);n.BibOuterStringComponent=g},function(_,n,a){function l($){return typeof $.stringref=="string"}Object.defineProperty(n,"__esModule",{value:!0});var m=function(){function $(g,y){this.braceDepth=g,this.stringref=y}return $}();n.StringRef=m,n.isStringRef=l},function(_,n,a){function l(s){return typeof s.key=="string"&&s.value!==void 0}function m(s){if(l(s))return{key:s.key,value:$(s.value)};throw new Error("Was not a KeyVal: "+JSON.stringify(s))}function $(s){if(e.isNumber(s))return s;var u=e.mustBeArray(s.data);switch(s.type){case"quotedstringwrapper":return u.length===1&&e.isNumber(u[0])?u[0]:new o.OuterQuotedString(u.map(function(b){return r.parseStringComponent(0,b)}));case"bracedstringwrapper":return new y.OuterBracedString(u.map(function(b){return r.parseStringComponent(0,b)}));default:throw new Error("Unexpected value: "+JSON.stringify(s))}}function g(s){if(s)return e.isNumber(s)?s:s.stringify()}Object.defineProperty(n,"__esModule",{value:!0});var y=a(2),o=a(1),e=a(0),r=a(3);n.isKeyVal=l,n.newKeyVal=m,n.parseFieldValue=$,n.normalizeFieldValue=g},function(_,n,a){function l(c){var x=m(c),f=x.key,i=x.value;return new d(f,i)}function m(c){if(s.isKeyVal(c))return s.newKeyVal(c);if(c.type!=="string")throw new Error("Unexpected node: "+JSON.stringify(c));return m(c.data)}function $(c){var x={};return Object.keys(c).forEach(function(f){x[f]||(x[f]=y({},x,c,c[f]))}),x}function g(c,x,f,i){return c.data.map(function(p){if(S.isString(p)||S.isNumber(p))return p;if(u.isStringRef(p))return o(x,i,p,f);if(w.isBibStringComponent(p))return e(p,x,f,i);throw new Error})}function y(c,x,f,i){return S.isNumber(i)?i:k.isOuterBracedString(i)||b.isOuterQuotedString(i)?r(i,c,x,f):u.isStringRef(i)?o(c,f,i,x):i}function o(c,x,f,i){var p=f.stringref;if(c[p])throw new Error("Cycle detected: "+p);if(i[p])return i[p];if(!x[p])throw new Error('Unresolved reference: "'+f.stringref+'" ('+JSON.stringify(f)+")");return i[p]=y(Object.assign({},c,(t={},t[p]=!0,t)),i,x,x[p]),i[p];var t}function e(c,x,f,i){var p=g(c,x,f,i),t=c.braceDepth;if(b.isQuotedString(c))return new b.QuotedString(t,p);if(k.isBracedString(c))return new k.BracedString(t,p);if(b.isOuterQuotedString(c))return new b.OuterQuotedString(p);if(k.isOuterBracedString(c))return new k.OuterBracedString(p);throw new Error}function r(c,x,f,i){var p=e(c,x,f,i);if(!k.isOuterBracedString(p)&&!b.isOuterQuotedString(p))throw new Error;return p}Object.defineProperty(n,"__esModule",{value:!0});var s=a(6),u=a(5),b=a(1),k=a(2),S=a(0),w=a(3),d=function(){function c(x,f){this.type="string",this.key=x,this.value=f}return c}();n.BibStringEntry=d,n.newStringEntry=l,n.resolveStrings=$,n.resolveStringReferences=g,n.resolveStringReference=y,n.copyWithResolvedStringReferences=e,n.copyOuterWithResolvedStringReferences=r},function(_,n,a){function l(i){var p=d.toStringBibStringData(i);return p?p.charAt(0):""}function m(i){return i.length>0&&$(i[0])}function $(i){if(b.isString(i)){if(!i)return!1;var p=i.charAt(0);return p.toLowerCase()===p&&p.toUpperCase()!==p}if(k.isQuotedString(i))return!(!i.data||i.data.length<=0)&&$(i.data[0]);if(S.isStringRef(i)||k.isOuterQuotedString(i)||w.isOuterBracedString(i))throw new Error("Should not do this test on this type");return!1}function g(i){for(var p=d.splitOnPattern(i,c),t=-1,h=-1,v=-1,O=0;O<p.length-1;O++)m(p[O])&&(t<0&&(t=O),h=O+1);v=t>=0?t:p.length-1;var B=t>=0?o(p,t,h):[],F=o(p,0,v),A=o(p,Math.max(h,v),p.length);return new x(F,B,A,[])}function y(i,p){for(var t=d.splitOnPattern(i,c),h=d.splitOnPattern(p,c),v=-1,O=-1,B=0;B<t.length-1;B++)m(t[B])&&(v<0&&(v=B),O=B+1);var F=v>=0?o(t,0,O):[],A=h,Q=o(t,Math.max(O,0));return new x(A,F,Q,[])}function o(i,p,t){for(var h=[],v=p;v<(t===void 0?i.length:t);v++)h.push(i[v]);return h}function e(i,p,t){for(var h=d.splitOnPattern(i,c),v=d.splitOnPattern(t,c),O=d.splitOnPattern(p,c),B=-1,F=-1,A=0;A<h.length-1;A++)m(h[A])&&(B<0&&(B=A),F=A+1);var Q=B>=0?o(h,0,F):[],X=o(h,Math.max(F,0));return new x(v,Q,X,O)}function r(i){var p=d.splitOnComma(i);switch(p.length){case 1:return g(p[0]);case 2:return y(u(p[0]),u(p[1]));case 3:return e(u(p[0]),u(p[1]),u(p[2]));default:throw new Error("Could not parse author name: partitioned as "+JSON.stringify(p)+" in "+JSON.stringify(i))}}function s(i){return i!==void 0}function u(i){if(s(i))return i;throw new Error("???????")}Object.defineProperty(n,"__esModule",{value:!0});var b=a(0),k=a(1),S=a(5),w=a(2),d=a(3),c=/\s+/g,x=function(){function i(p,t,h,v){this.firstNames$=p,this.vons$=t,this.lastNames$=h,this.jrs$=v,this.initials=p.map(l),this.firstNames=p.map(d.toStringBibStringData),this.vons=t.map(d.toStringBibStringData),this.lastNames=h.map(d.toStringBibStringData),this.jrs=v.map(d.toStringBibStringData),this.id=this.firstNames.join("-")+"-"+this.vons.join("-")+"-"+this.lastNames.join("-")+"-"+this.jrs.join("-")}return i}();n.AuthorName=x,n.parseAuthorName=r;var f=function(){function i(p,t,h){this.first=p,this.von=t,this.last=h}return i}();n.Authorrr=f},function(_,n,a){function l(S){return r.parseAuthorName(S)}function m(S){return e.isNumber(S)?$([S]):$(S.data,s.isOuterQuotedString(S))}function $(S,w){var d=b.globContiguousStrings(b.flattenQuotedStrings(S,w)),c=d.map(function(x){return b.isContiguousSimpleString(x)?b.joinContiguousSimpleStrings(x):x});return b.splitOnAnd(c)}function g(S){if(!y(S))throw new Error;return S}function y(S){return e.isArray(S.authors$)&&S.type==="authors"}var o=this&&this.__extends||function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,d){w.__proto__=d}||function(w,d){for(var c in d)d.hasOwnProperty(c)&&(w[c]=d[c])};return function(w,d){function c(){this.constructor=w}S(w,d),w.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var e=a(0),r=a(8),s=a(1),u=a(4),b=a(3),k=function(S){function w(d){var c=this,x=e.isNumber(d)?[d]:d.data;c=S.call(this,"authors",x)||this;var f=m(d);return c.authors$=f.map(function(i){return l(i)}),c}return o(w,S),w}(u.BibOuterStringComponent);n.Authors=k,n.determineAuthorNames$=m,n.mustBeAuthors=g,n.isAuthors=y},function(_,n,a){function l(e){return e.type==="comment"&&$.isArray(e.data)}function m(e){return $.flattenMyArray(e).map(o)}Object.defineProperty(n,"__esModule",{value:!0});var $=a(0),g=function(){function e(r){this.type="comment",this.data=r,this.string=r.join("")}return e.prototype.toString=function(){return this.string},e}();n.BibComment=g;var y=function(){function e(r,s){this.type=r,this.data=s,this.string=s.join("")}return e.prototype.toString=function(){return this.string},e}();n.CommentEntry=y,n.isBibComment=l;var o=function(e){return $.isString(e)?e:typeof e=="number"?e.toString():e.type==="@bib"?"@"+$.mustBeString(e.string):e.type==="escapedEntry"?"\\"+o(e.data):$.mustBeString(e.string)};n.flattenPlainText=m},function(_,n,a){function l(r){var s={};return Object.keys(r).forEach(function(u){s[u]=o.parseFieldValue(r[u])}),s}function m(r){return typeof r.type=="string"&&typeof r._id=="string"&&!!r.fields}function $(r,s){var u={},b=r.fields;return Object.keys(r.fields).forEach(function(k){var S=y.resolveStringReference({},u,s,b[k]);switch(k){case"author":u[k]=new g.Authors(S);break;case"title":u[k]=S;break;case"incollection":default:u[k]=S}}),new e(r.type,r._id,u)}Object.defineProperty(n,"__esModule",{value:!0});var g=a(9),y=a(7),o=a(6),e=function(){function r(s,u,b){this.type=s,this._id=u,this.fields=b,this.sortkey$="",this.title$=""}return r.prototype.getField=function(s){return this.fields[s.toLowerCase()]},r.prototype.getFieldAsString=function(s){var u=this.getField(s);return o.normalizeFieldValue(u)},r.prototype.getAuthors=function(){var s=this.fields.author;return s===void 0?s:g.mustBeAuthors(s)},r}();n.BibEntry=e,n.parseEntryFields=l,n.isBibEntry=m,n.processEntry=$},function(_,n,a){function l(o){return o.type==="preamble"&&!!o.data}function m(o){var e=g.parseBibEntriesAndNonEntries($.mustBeArray(o.data));return new y(e)}Object.defineProperty(n,"__esModule",{value:!0});var $=a(0),g=a(13),y=function(){function o(e){this.type="preamble",this.data=e,this.string=e.join("")}return o.prototype.toString=function(){return this.string},o}();n.Preamble=y,n.isPreamble=l,n.newPreambleNode=m},function(_,n,a){function l(w){if(!o.isArray(w.data)||w.type!=="NON_ENTRY")throw new Error;return new s.BibComment(s.flattenPlainText(w.data))}function m(w){switch(typeof w){case"object":var d=w.data;if(typeof d["@type"]=="string")return new r.BibEntry(d["@type"],d._id,r.parseEntryFields(d.fields));switch(o.mustBeString(d.type)){case"string":return b.newStringEntry(d);case"preamble":return u.newPreambleNode(d);default:throw new Error("Unexpected entry parsed: "+d.type)}default:throw new Error("Expected object as data for entry")}}function $(w){var d=new g.Parser(y.grammar.ParserRules,y.grammar.ParserStart);d.feed(new k.default(w).readTokens());var c=d.results,x=c[0];return new S(n.parseBibEntriesAndNonEntries(x))}Object.defineProperty(n,"__esModule",{value:!0});var g=a(19),y=a(20),o=a(0),e=a(6),r=a(11),s=a(10),u=a(12),b=a(7),k=a(21),S=function(){function w(d){var c=this;this.content=d,this.comments=d.filter(s.isBibComment).map(function(i){if(s.isBibComment(i))return i;throw new Error}),this.preambles_raw=d.filter(function(i){return u.isPreamble(i)}).map(function(i){if(u.isPreamble(i))return i;throw new Error}),this.preamble$=this.preambles_raw.map(function(i){return i.toString()}).join(`
`);var x={};this.content.forEach(function(i){if(e.isKeyVal(i)){if(x[i.key])throw new Error("String with id "+i.key+" was defined more than once");x[i.key]=i.value}}),this.strings_raw=x,this.strings$=b.resolveStrings(x),this.entries_raw=d.filter(function(i){return r.isBibEntry(i)}).map(function(i){if(r.isBibEntry(i))return i;throw new Error});var f={};this.entries_raw.forEach(function(i){var p=i._id.toLowerCase();if(f[p])throw new Error("Entry with id "+p+" was defined more than once");f[p]=r.processEntry(i,c.strings$)}),this.entries$=f}return w.prototype.getEntry=function(d){return this.entries$[d.toLowerCase()]},w}();n.BibFilePresenter=S,n.parseBibEntriesAndNonEntries=function(w){return w.map(function(d){switch(d.type){case"NON_ENTRY":return l(d);case"ENTRY":return m(d);default:throw new Error("Expected ENTRY or NON_ENTRY")}})},n.parseBibFile=$},function(_,n,a){function l(g,y){return{type:g,string:y}}function m(g){return n.specialChars.hasOwnProperty(g)}function $(g){return n.escapableChars.hasOwnProperty(g)}Object.defineProperty(n,"__esModule",{value:!0}),n.newToken=l,n.specialChars={"@":!0,"(":!0,")":!0,"{":!0,"}":!0,"#":!0,"=":!0,",":!0,"\\":!0,'"':!0},n.isSpecialChar=m,n.escapableChars={"\\":!0,"@":!0,"{":!0,"}":!0},n.isEscapableChar=$},function(_,n,a){function l(g){return{type:"ws",string:g}}function m(g){return typeof g.string=="string"&&g.type===n.WS}function $(g){return n.singleWhitespaces.hasOwnProperty(g)}Object.defineProperty(n,"__esModule",{value:!0}),n.WS="ws",n.newWhitespace=l,n.isWhitespace=m,n.singleWhitespaces={" ":!0,"	":!0,"\r":!0,"\n":!0},n.isSingleWhiteSpaceCharacter=$},function(_,n,a){function l($){return{type:"number",string:$}}function m($){return n.numericChars.hasOwnProperty($)}Object.defineProperty(n,"__esModule",{value:!0}),n.newNumber=l,n.numericChars={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},n.isNum=m},function(_,n,a){function l(m){for(var $ in m)n.hasOwnProperty($)||(n[$]=m[$])}Object.defineProperty(n,"__esModule",{value:!0}),l(a(8)),l(a(9)),l(a(18)),l(a(10)),l(a(11)),l(a(12)),l(a(7)),l(a(3)),l(a(4)),l(a(2)),l(a(1)),l(a(5)),l(a(6)),l(a(13)),l(a(0))},function(_,n,a){function l(o){return n.optionalFields.hasOwnProperty(o)}function m(o){return n.mandatoryFields.hasOwnProperty(o)}function $(o){return m(o)?n.mandatoryFields[o]:[]}function g(o){return l(o)?n.optionalFields[o]:[]}Object.defineProperty(n,"__esModule",{value:!0});var y=a(0);n.address="address",n.author="author",n.booktitle="booktitle",n.chapter="chapter",n.edition="edition",n.editor="editor",n.howpublished="howpublished",n.institution="institution",n.journal="journal",n.month="month",n.note="note",n.number="number",n.organization="organization",n.pages="pages",n.publisher="publisher",n.school="school",n.series="series",n.title="title",n.type="type",n.volume="volume",n.year="year",n.optionalFields={book:[["volume","number"],"series","address","edition","month","note"],booklet:["author","howpublished","address","address","month","year","note"],conference:["editor",["volume","number"],"series","pages","address","month","organization","publisher","note"],inproceedings:["editor",["volume","number"],n.series,"pages","address","month","organization","publisher","note"],inbook:["volume","number","series","type","address","edition","month","note"],incollection:["editor",["volume","number"],"series","type","chapter","pages","address","edition","month","note"],manual:["author","organization","year","address","edition","month","note"],mastersthesis:["type","address","month","note"],misc:[],phdthesis:["type","address","month","note"],proceedings:["editor",["volume","number"],"series","address","month","organization","publisher","note"],techreport:["type","address","number","month","note"],unpublished:["month","year"]},n.mandatoryFields={article:["author","title","year","journal"],book:[["author","editor"],"title","publisher","year"],booklet:["title"],conference:["author","title","booktitle","year"],inproceedings:["author","title","booktitle","year"],inbook:[["author","editor"],"title",["chapter","pages"]],incollection:["author","title","booktitle","publisher","year"],manual:["title"],mastersthesis:["author","title","school","year"],misc:[["author","title","howpublished","year","month","note"]],phdthesis:["author","title","school","year"],proceedings:["year","title"],techreport:["author","title","institution","year"],unpublished:["author","title","note"]},n.hasOptionalFields=l,n.hasMandatoryFields=m,n.getMandatoryFields=$,n.getOptionalFields=g,n.findError=function(o,e){var r=o.fields;if(y.isString(e)){if(!r[e])return new Error("Warning: expected "+o.type+" with id "+o._id+" to have the field: "+e)}else if(y.isArray(e)){var s=e.reduce(function(u,b){if(y.isString(b))return u&&r.hasOwnProperty(b);throw new Error},!0);if(!s)return new Error("Expected "+o.type+" with id "+o._id+" to have one of the following fields: "+e)}}},function(_,n){(function(a,l){typeof _=="object"&&_.exports?_.exports=l():a.nearley=l()})(this,function(){function a(o,e,r){return this.id=++a.highestId,this.name=o,this.symbols=e,this.postprocess=r,this}function l(o,e,r,s){this.rule=o,this.dot=e,this.reference=r,this.data=[],this.wantedBy=s,this.isComplete=this.dot===o.symbols.length}function m(o,e){this.grammar=o,this.index=e,this.states=[],this.wants={},this.scannable=[],this.completed={}}function $(o,e){this.rules=o,this.start=e||this.rules[0].name;var r=this.byName={};this.rules.forEach(function(s){r.hasOwnProperty(s.name)||(r[s.name]=[]),r[s.name].push(s)})}function g(){this.reset("")}function y(o,e,s){if(o instanceof $)var u=o,s=e;else var u=$.fromCompiled(o,e);this.grammar=u,this.options={keepHistory:!1,lexer:u.lexer||new g};for(var b in s||{})this.options[b]=s[b];this.lexer=this.options.lexer,this.lexerState=void 0;var k=new m(u,0);this.table=[k],k.wants[u.start]=[],k.predict(u.start),k.process(),this.current=0}return a.highestId=0,a.prototype.toString=function(o){function e(s){return s.literal?JSON.stringify(s.literal):s.type?"%"+s.type:s.toString()}var r=o===void 0?this.symbols.map(e).join(" "):this.symbols.slice(0,o).map(e).join(" ")+" ● "+this.symbols.slice(o).map(e).join(" ");return this.name+" → "+r},l.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},l.prototype.nextState=function(o){var e=new l(this.rule,this.dot+1,this.reference,this.wantedBy);return e.left=this,e.right=o,e.isComplete&&(e.data=e.build()),e},l.prototype.build=function(){var o=[],e=this;do o.push(e.right.data),e=e.left;while(e.left);return o.reverse(),o},l.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,y.fail))},m.prototype.process=function(o){for(var e=this.states,r=this.wants,s=this.completed,u=0;u<e.length;u++){var b=e[u];if(b.isComplete){if(b.finish(),b.data!==y.fail){for(var k=b.wantedBy,S=k.length;S--;){var w=k[S];this.complete(w,b)}if(b.reference===this.index){var d=b.rule.name;(this.completed[d]=this.completed[d]||[]).push(b)}}}else{var d=b.rule.symbols[b.dot];if(typeof d!="string"){this.scannable.push(b);continue}if(r[d]){if(r[d].push(b),s.hasOwnProperty(d))for(var c=s[d],S=0;S<c.length;S++){var x=c[S];this.complete(b,x)}}else r[d]=[b],this.predict(d)}}},m.prototype.predict=function(o){for(var e=this.grammar.byName[o]||[],r=0;r<e.length;r++){var s=e[r],u=this.wants[o],b=new l(s,0,this.index,u);this.states.push(b)}},m.prototype.complete=function(o,e){var r=e.rule.name;if(o.rule.symbols[o.dot]===r){var s=o.nextState(e);this.states.push(s)}},$.fromCompiled=function(s,e){var r=s.Lexer;s.ParserStart&&(e=s.ParserStart,s=s.ParserRules);var s=s.map(function(b){return new a(b.name,b.symbols,b.postprocess)}),u=new $(s,e);return u.lexer=r,u},g.prototype.reset=function(o,e){this.buffer=o,this.index=0,this.line=e?e.line:1,this.lastLineBreak=e?-e.col:0},g.prototype.next=function(){if(this.index<this.buffer.length){var o=this.buffer[this.index++];return o===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:o}}},g.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},g.prototype.formatError=function(o,e){var r=this.buffer;if(typeof r=="string"){var s=r.indexOf(`
`,this.index);s===-1&&(s=r.length);var u=r.substring(this.lastLineBreak,s),b=this.index-this.lastLineBreak;return e+=" at line "+this.line+" col "+b+`:

`,e+="  "+u+`
`,e+="  "+Array(b).join(" ")+"^"}return e+" at index "+(this.index-1)},y.fail={},y.prototype.feed=function(o){var e=this.lexer;e.reset(o,this.lexerState);for(var r;r=e.next();){var s=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var u=this.current+1,b=new m(this.grammar,u);this.table.push(b);for(var k=r.value,S=e.constructor===g?r.value:r,w=s.scannable,d=w.length;d--;){var c=w[d],x=c.rule.symbols[c.dot];if(x.test?x.test(S):x.type?x.type===r.type:x.literal===k){var f=c.nextState({data:S,token:r,isToken:!0,reference:u-1});b.states.push(f)}}if(b.process(),b.states.length===0){var i=this.lexer.formatError(r,"invalid syntax")+`
`;i+="Unexpected "+(r.type?r.type+" token: ":""),i+=JSON.stringify(r.value!==void 0?r.value:r)+`
`;var p=new Error(i);throw p.offset=this.current,p.token=r,p}this.options.keepHistory&&(s.lexerState=e.save()),this.current++}return s&&(this.lexerState=e.save()),this.results=this.finish(),this},y.prototype.save=function(){var o=this.table[this.current];return o.lexerState=this.lexerState,o},y.prototype.restore=function(o){var e=o.index;this.current=e,this.table[e]=o,this.table.splice(e+1),this.lexerState=o.lexerState,this.results=this.finish()},y.prototype.rewind=function(o){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[o])},y.prototype.finish=function(){var o=[],e=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(r){r.rule.name===e&&r.dot===r.rule.symbols.length&&r.reference===0&&r.data!==y.fail&&o.push(r)}),o.map(function(r){return r.data})},{Parser:y,Grammar:$,Rule:a}})},function(_,n,a){function l(t){return t[0]}function m(t,h){if(h.type!=="keyval")throw new Error("Expected a keyval object");var v=h.key.toLowerCase();return t.fields[v]?void 0:(t.fields[v]=h.value,t)}function $(t){for(var h=[],v=0;v<t.length;v++)if(typeof t[v]=="object"){if(!t[v].string)throw new Error("Expected token to have a string field called 'string' in object "+JSON.stringify(t[v]));h.push(t[v].string)}else{if(typeof t[v]!="string"&&typeof t[v]!="number")throw new Error("Could not handle token "+JSON.stringify(t[v])+" in array "+JSON.stringify(t));h.push(t[v])}return h.join("")}Object.defineProperty(n,"__esModule",{value:!0});var g=function(t){return t.constructor===Number||typeof t=="object"&&t.type==="number"},y={test:function(t){return typeof t=="object"&&t.type==="id"}},o={test:function(t){return typeof t=="object"&&t.type==="@bib"}},e={test:function(t){return typeof t=="object"&&t.type==="@string"}},r={test:function(t){return typeof t=="object"&&t.type==="@preamble"}},s={test:function(t){return typeof t=="object"&&t.type==="@comment"}},u={test:function(t){return typeof t=="object"&&t.type==="ws"}},b={test:g},k={literal:"#"},S={literal:"="},w={literal:"\\"},d={literal:"("},c={literal:")"},x={literal:"{"},f={literal:"}"},i={literal:'"'},p={literal:","};n.grammar={Lexer:void 0,ParserRules:[{name:"main$ebnf$1",symbols:["non_entry"],postprocess:l},{name:"main$ebnf$1",symbols:[],postprocess:function(){}},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["non_entry"],postprocess:l},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:function(){}},{name:"main$ebnf$2$subexpression$1",symbols:["entry","main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"main",symbols:["main$ebnf$1","main$ebnf$2"],postprocess:function(t){var h=[];t[0]&&h.push({type:"NON_ENTRY",data:t[0]});for(var v=0;v<t[1].length;v++)h.push({type:"ENTRY",data:t[1][v][0]}),t[1][v][1]&&h.push({type:"NON_ENTRY",data:t[1][v][1]});return h}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",u],postprocess:function(t){return t[0].concat([t[1]])}},{name:"_",symbols:["_$ebnf$1"]},{name:"entry_decl$subexpression$1",symbols:[o]},{name:"entry_decl$subexpression$1",symbols:[e]},{name:"entry_decl$subexpression$1",symbols:[r]},{name:"entry_decl$subexpression$1",symbols:[s]},{name:"entry_decl",symbols:["entry_decl$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"entry$subexpression$1",symbols:["bib_entry"]},{name:"entry$subexpression$1",symbols:["string_entry"]},{name:"entry$subexpression$1",symbols:["preamble_entry"]},{name:"entry$subexpression$1",symbols:["comment_entry"]},{name:"entry",symbols:["entry$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"comment",symbols:["main"],postprocess:function(t){return t[0]}},{name:"comment_liberal$ebnf$1",symbols:[]},{name:"comment_liberal$ebnf$1$subexpression$1",symbols:[/./]},{name:"comment_liberal$ebnf$1",symbols:["comment_liberal$ebnf$1","comment_liberal$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"comment_liberal",symbols:["comment_liberal$ebnf$1"],postprocess:function(t){for(var h=[],v=0;v<t[0].length;v++)h.push(t[0][v][0]);return h}},{name:"entry_body_comment$subexpression$1$macrocall$2",symbols:["comment"]},{name:"entry_body_comment$subexpression$1$macrocall$1",symbols:[d,"entry_body_comment$subexpression$1$macrocall$2",c],postprocess:function(t){return t[1]}},{name:"entry_body_comment$subexpression$1",symbols:["entry_body_comment$subexpression$1$macrocall$1"]},{name:"entry_body_comment$subexpression$1$macrocall$4",symbols:["comment"]},{name:"entry_body_comment$subexpression$1$macrocall$3",symbols:[x,"entry_body_comment$subexpression$1$macrocall$4",f],postprocess:function(t){return t[1]}},{name:"entry_body_comment$subexpression$1",symbols:["entry_body_comment$subexpression$1$macrocall$3"]},{name:"entry_body_comment",symbols:["entry_body_comment$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"entry_body_string$subexpression$1$macrocall$2",symbols:["keyval"]},{name:"entry_body_string$subexpression$1$macrocall$1",symbols:[d,"_","entry_body_string$subexpression$1$macrocall$2","_",c],postprocess:function(t){return t[2]}},{name:"entry_body_string$subexpression$1",symbols:["entry_body_string$subexpression$1$macrocall$1"]},{name:"entry_body_string$subexpression$1$macrocall$4",symbols:["keyval"]},{name:"entry_body_string$subexpression$1$macrocall$3",symbols:[x,"_","entry_body_string$subexpression$1$macrocall$4","_",f],postprocess:function(t){return t[2]}},{name:"entry_body_string$subexpression$1",symbols:["entry_body_string$subexpression$1$macrocall$3"]},{name:"entry_body_string",symbols:["entry_body_string$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"entry_body_bib$subexpression$1$macrocall$2",symbols:["bib_content"]},{name:"entry_body_bib$subexpression$1$macrocall$1",symbols:[d,"_","entry_body_bib$subexpression$1$macrocall$2","_",c],postprocess:function(t){return t[2]}},{name:"entry_body_bib$subexpression$1",symbols:["entry_body_bib$subexpression$1$macrocall$1"]},{name:"entry_body_bib$subexpression$1$macrocall$4",symbols:["bib_content"]},{name:"entry_body_bib$subexpression$1$macrocall$3",symbols:[x,"_","entry_body_bib$subexpression$1$macrocall$4","_",f],postprocess:function(t){return t[2]}},{name:"entry_body_bib$subexpression$1",symbols:["entry_body_bib$subexpression$1$macrocall$3"]},{name:"entry_body_bib",symbols:["entry_body_bib$subexpression$1"],postprocess:function(t){return t[0][0][0]}},{name:"bib_content$ebnf$1",symbols:[]},{name:"bib_content$ebnf$1$subexpression$1",symbols:["keyval","_",p,"_"]},{name:"bib_content$ebnf$1",symbols:["bib_content$ebnf$1","bib_content$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"bib_content$ebnf$2$subexpression$1",symbols:["_",p]},{name:"bib_content$ebnf$2",symbols:["bib_content$ebnf$2$subexpression$1"],postprocess:l},{name:"bib_content$ebnf$2",symbols:[],postprocess:function(){}},{name:"bib_content",symbols:["key_string","_",p,"_","bib_content$ebnf$1","keyval","bib_content$ebnf$2"],postprocess:function(t){for(var h={_id:t[0],fields:[]},v=t[4],O=0;O<v.length;O++)h.fields.push(v[O][0]);return h.fields.push(t[5]),h}},{name:"bib_entry",symbols:[o,"_","entry_body_bib"],postprocess:function(t){var h={_id:t[2]._id};h["@type"]=t[0].string,h.fields={};for(var v=t[2].fields,O=0;O<v.length;O++)m(h,v[O]);return h}},{name:"string_entry",symbols:[e,"_","entry_body_string"],postprocess:function(t){return{type:"string",data:t[2]}}},{name:"preamble_entry",symbols:[r,"_","entry_body_comment"],postprocess:function(t){return{type:"preamble",data:t[2]}}},{name:"comment_entry",symbols:[s,"_","entry_body_comment"],postprocess:function(t){return{type:"comment",data:t[2]}}},{name:"keyval",symbols:["key_string","_",S,"_","value_string"],postprocess:function(t){return{type:"keyval",key:t[0],value:t[4]}}},{name:"braced_string$ebnf$1",symbols:[]},{name:"braced_string$ebnf$1$subexpression$1",symbols:["non_brace"]},{name:"braced_string$ebnf$1$subexpression$1",symbols:["braced_string"]},{name:"braced_string$ebnf$1",symbols:["braced_string$ebnf$1","braced_string$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"braced_string",symbols:[x,"braced_string$ebnf$1",f],postprocess:function(t){var h=[];for(var v in t[1])h.push(t[1][v][0]);return{type:"braced",data:h}}},{name:"quoted_string$ebnf$1",symbols:[]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["escaped_quote"]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["non_quote_non_brace"]},{name:"quoted_string$ebnf$1$subexpression$1",symbols:["braced_string"]},{name:"quoted_string$ebnf$1",symbols:["quoted_string$ebnf$1","quoted_string$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"quoted_string",symbols:[i,"quoted_string$ebnf$1",i],postprocess:function(t){var h=[];for(var v in t[1])h.push(t[1][v][0]);return{type:"quotedstring",data:h}}},{name:"escaped_quote",symbols:[w,i]},{name:"non_quote_non_brace$subexpression$1",symbols:[y]},{name:"non_quote_non_brace$subexpression$1",symbols:[o]},{name:"non_quote_non_brace$subexpression$1",symbols:[e]},{name:"non_quote_non_brace$subexpression$1",symbols:[r]},{name:"non_quote_non_brace$subexpression$1",symbols:[s]},{name:"non_quote_non_brace$subexpression$1",symbols:[u]},{name:"non_quote_non_brace$subexpression$1",symbols:[b]},{name:"non_quote_non_brace$subexpression$1",symbols:[k]},{name:"non_quote_non_brace$subexpression$1",symbols:[S]},{name:"non_quote_non_brace$subexpression$1",symbols:[w]},{name:"non_quote_non_brace$subexpression$1",symbols:[d]},{name:"non_quote_non_brace$subexpression$1",symbols:[c]},{name:"non_quote_non_brace$subexpression$1",symbols:[p]},{name:"non_quote_non_brace",symbols:["non_quote_non_brace$subexpression$1"]},{name:"key_string$ebnf$1",symbols:["stringreftoken"]},{name:"key_string$ebnf$1",symbols:["key_string$ebnf$1","stringreftoken"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"key_string",symbols:["key_string$ebnf$1"],postprocess:function(t){return $(t[0]).toLowerCase()}},{name:"value_string$subexpression$1$ebnf$1",symbols:[]},{name:"value_string$subexpression$1$ebnf$1$subexpression$1",symbols:["_",k,"_","quoted_string_or_ref"]},{name:"value_string$subexpression$1$ebnf$1",symbols:["value_string$subexpression$1$ebnf$1","value_string$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"value_string$subexpression$1",symbols:["quoted_string_or_ref","value_string$subexpression$1$ebnf$1"]},{name:"value_string$subexpression$1",symbols:["braced_string"]},{name:"value_string",symbols:["value_string$subexpression$1"],postprocess:function(t){var h=t[0];if(h.length===2){var v=[];v.push(h[0]);for(var O=0;O<h[1].length;O++)v.push(h[1][O][3]);return{type:"quotedstringwrapper",data:v}}if(h[0].type==="braced")return{type:"bracedstringwrapper",data:h[0].data};throw new Error("Don't know how to handle value "+JSON.stringify(h[0]))}},{name:"quoted_string_or_ref$subexpression$1",symbols:["quoted_string"]},{name:"quoted_string_or_ref$subexpression$1",symbols:["string_ref"]},{name:"quoted_string_or_ref$subexpression$1",symbols:[b]},{name:"quoted_string_or_ref",symbols:["quoted_string_or_ref$subexpression$1"],postprocess:function(t){return t[0][0].type,t[0][0]}},{name:"string_ref$subexpression$1$ebnf$1",symbols:[]},{name:"string_ref$subexpression$1$ebnf$1",symbols:["string_ref$subexpression$1$ebnf$1","stringreftoken"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"string_ref$subexpression$1",symbols:["stringreftoken_n_num","string_ref$subexpression$1$ebnf$1"]},{name:"string_ref",symbols:["string_ref$subexpression$1"],postprocess:function(t){return{stringref:t[0][0]+$(t[0][1])}}},{name:"stringreftoken$subexpression$1",symbols:[w]},{name:"stringreftoken$subexpression$1",symbols:[d]},{name:"stringreftoken$subexpression$1",symbols:[c]},{name:"stringreftoken$subexpression$1",symbols:[y]},{name:"stringreftoken$subexpression$1",symbols:[b]},{name:"stringreftoken$subexpression$1",symbols:[o]},{name:"stringreftoken$subexpression$1",symbols:[e]},{name:"stringreftoken$subexpression$1",symbols:[r]},{name:"stringreftoken$subexpression$1",symbols:[s]},{name:"stringreftoken",symbols:["stringreftoken$subexpression$1"],postprocess:function(t){if(typeof t[0][0]=="object"){if(!t[0][0].string)throw new Error("Expected "+t[0]+"to have a 'string' field");return t[0][0].string}if(typeof t[0][0]!="string"&&typeof t[0][0]!="number")throw new Error("Expected "+t[0][0]+" to be a string");return t[0][0]}},{name:"stringreftoken_n_num$subexpression$1",symbols:[w]},{name:"stringreftoken_n_num$subexpression$1",symbols:[d]},{name:"stringreftoken_n_num$subexpression$1",symbols:[c]},{name:"stringreftoken_n_num$subexpression$1",symbols:[y]},{name:"stringreftoken_n_num$subexpression$1",symbols:[o]},{name:"stringreftoken_n_num$subexpression$1",symbols:[e]},{name:"stringreftoken_n_num$subexpression$1",symbols:[r]},{name:"stringreftoken_n_num$subexpression$1",symbols:[s]},{name:"stringreftoken_n_num",symbols:["stringreftoken_n_num$subexpression$1"],postprocess:function(t){if(typeof t[0][0]=="object"){if(!t[0][0].string)throw new Error("Expected "+t[0]+"to have a 'string' field");return t[0][0].string}if(typeof t[0][0]!="string"&&typeof t[0][0]!="number")throw new Error("Expected "+t[0][0]+" to be a string");return t[0][0]}},{name:"non_brace$subexpression$1",symbols:[w]},{name:"non_brace$subexpression$1",symbols:[d]},{name:"non_brace$subexpression$1",symbols:[c]},{name:"non_brace$subexpression$1",symbols:[y]},{name:"non_brace$subexpression$1",symbols:[i]},{name:"non_brace$subexpression$1",symbols:[u]},{name:"non_brace$subexpression$1",symbols:[b]},{name:"non_brace$subexpression$1",symbols:[p]},{name:"non_brace$subexpression$1",symbols:[o]},{name:"non_brace$subexpression$1",symbols:[e]},{name:"non_brace$subexpression$1",symbols:[r]},{name:"non_brace$subexpression$1",symbols:[s]},{name:"non_brace$subexpression$1",symbols:[k]},{name:"non_brace$subexpression$1",symbols:[S]},{name:"non_brace",symbols:["non_brace$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"non_bracket$subexpression$1",symbols:[w]},{name:"non_bracket$subexpression$1",symbols:[y]},{name:"non_bracket$subexpression$1",symbols:[i]},{name:"non_bracket$subexpression$1",symbols:[u]},{name:"non_bracket$subexpression$1",symbols:[b]},{name:"non_bracket$subexpression$1",symbols:[p]},{name:"non_bracket$subexpression$1",symbols:[o]},{name:"non_bracket$subexpression$1",symbols:[e]},{name:"non_bracket$subexpression$1",symbols:[r]},{name:"non_bracket$subexpression$1",symbols:[s]},{name:"non_bracket$subexpression$1",symbols:[k]},{name:"non_bracket$subexpression$1",symbols:[S]},{name:"non_bracket",symbols:["non_bracket$subexpression$1"],postprocess:function(t){return t[0][0]}},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_entry"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_escape"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["escaped_non_esc_outside_entry"]},{name:"non_entry$ebnf$1$subexpression$1",symbols:["non_esc_outside_entry"]},{name:"non_entry$ebnf$1",symbols:["non_entry$ebnf$1$subexpression$1"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_entry"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_escape"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["escaped_non_esc_outside_entry"]},{name:"non_entry$ebnf$1$subexpression$2",symbols:["non_esc_outside_entry"]},{name:"non_entry$ebnf$1",symbols:["non_entry$ebnf$1","non_entry$ebnf$1$subexpression$2"],postprocess:function(t){return t[0].concat([t[1]])}},{name:"non_entry",symbols:["non_entry$ebnf$1"],postprocess:function(t){for(var h=[],v=0;v<t[0].length;v++)h.push(t[0][v][0]);return h}},{name:"escaped_escape",symbols:[w,w],postprocess:function(){return"\\"}},{name:"escaped_entry",symbols:[w,"entry_decl"],postprocess:function(t){return{type:"escapedEntry",data:t[1]}}},{name:"escaped_non_esc_outside_entry",symbols:[w,"non_esc_outside_entry"],postprocess:function(t){return t}},{name:"non_esc_outside_entry$subexpression$1",symbols:[y]},{name:"non_esc_outside_entry$subexpression$1",symbols:[u]},{name:"non_esc_outside_entry$subexpression$1",symbols:[b]},{name:"non_esc_outside_entry$subexpression$1",symbols:[k]},{name:"non_esc_outside_entry$subexpression$1",symbols:[S]},{name:"non_esc_outside_entry$subexpression$1",symbols:[d]},{name:"non_esc_outside_entry$subexpression$1",symbols:[c]},{name:"non_esc_outside_entry$subexpression$1",symbols:[x]},{name:"non_esc_outside_entry$subexpression$1",symbols:[f]},{name:"non_esc_outside_entry$subexpression$1",symbols:[i]},{name:"non_esc_outside_entry$subexpression$1",symbols:[p]},{name:"non_esc_outside_entry",symbols:["non_esc_outside_entry$subexpression$1"],postprocess:function(t){return t[0][0]}}],ParserStart:"main"}},function(_,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=a(14),m=a(15),$=a(16),g=a(22),y=a(23),o=function(){function e(r){this.str=r,this.len=r.length,this.pos=0}return e.prototype.getStringUntilNonEscapedChar=function(r){for(var s=[],u=this.pos;u<this.len+1;u++){if(this.pos=u,this.str.charAt(u)=="\\"&&this.str.charAt(u+1).match(r))u++,this.pos=u;else if(this.str.charAt(u).match(r))break;s.push(this.str.charAt(u))}return s.join("")},e.prototype.readTokens=function(){for(var r,s=[];r=this.readNextToken();)s.push(r);return s},e.prototype.readNextToken=function(){if(!(this.pos>=this.str.length)){var r=this.str.charAt(this.pos);return m.isSingleWhiteSpaceCharacter(r)?this.eatWhiteSpace():l.isSpecialChar(r)?this.eatSpecialChars(r):$.isNum(r)?this.eatNumericString(r):this.eatIdString()}},e.prototype.eatIdString=function(){for(var r=[],s=this.pos,u=s;u<this.len+1;u++){this.pos=u;var b=this.str.charAt(u);if(!g.isIdChar(b))break;r.push(b)}return g.newIdToken(r.join("").trim())},e.prototype.eatNumericString=function(r){for(var s=[r],u=this.pos+1,b=u;b<this.len+1;b++){this.pos=b;var k=this.str.charAt(b);if(!$.isNum(k))break;s.push(k)}var S=s.join("");if(s[0]==="0")return $.newNumber(S);var w=Number.parseInt(S);return Number.isFinite(w)?w:$.newNumber(S)},e.prototype.eatSpecialChars=function(r){if(this.pos++,r==="@"){var s=this.getStringUntilNonEscapedChar("{").trim().toLowerCase();return y.isBibType(s)?l.newToken(y.bibTypes[s],s):l.newToken("@bib",s)}return r},e.prototype.eatWhiteSpace=function(){for(var r=[];this.pos<this.len+1;){var s=this.str.charAt(this.pos);if(!m.isSingleWhiteSpaceCharacter(s))break;r.push(s),this.pos++}return m.newWhitespace(r.join(""))},e}();n.default=o},function(_,n,a){function l(e){return{type:"id",string:e}}function m(e){return e.type==="id"&&typeof e.string=="string"}function $(e){return!(g.isSpecialChar(e)||o.isNum(e)||y.isSingleWhiteSpaceCharacter(e))}Object.defineProperty(n,"__esModule",{value:!0});var g=a(14),y=a(15),o=a(16);n.newIdToken=l,n.isIdToken=m,n.isIdChar=$},function(_,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.bibTypes={string:"@string",preamble:"@preamble",comment:"@comment",bib:"@bib"},n.isBibType=function(l){return n.bibTypes.hasOwnProperty(l)}}])})}(ee)),ee.exports}var Ut=Ht();const Yt={class:"wrapper-sketch"},Kt={class:"wrapper-sketch-text-subtitle"},Gt={class:"wrapper-sketch-text-content"},Zt={class:"publications-papers-card-title"},Xt={class:"publications-papers-card-authors"},en={class:"publications-papers-card-journal"},tn={class:"publications-papers-card-abstract"},nn=H({__name:"Publications",setup(E){const C=V(ct()),_=V();_.value=document.body.clientWidth,window.onresize=()=>{_.value=document.body.clientWidth};function n(y){const o=document.getElementById(y);o&&o.scrollIntoView({block:"start",behavior:"smooth"})}const a=V(null),l=V([]),m=V([]);function $(y){const o={};return y.forEach(r=>{if(r.isShow!=="true")return;const s=new Date(r.date).getFullYear();o[s]||(o[s]={_id:s,papers:[],count:0,year:s}),o[s].papers.push(r),o[s].count+=1,o[s].papers.sort((u,b)=>new Date(b.date).getTime()-new Date(u.date).getTime())}),Object.values(o).sort((r,s)=>s.year-r.year)}Ie(async()=>{try{const o=await(await fetch("./jsons/04.publications.json")).json();a.value=o.basic;const r=await(await fetch("./assets/04.publications/papers.bib")).text(),s=Ut.parseBibFile(r);l.value=Object.values(s.entries$).map(u=>{var k,S,w,d,c,x,f,i,p,t,h,v,O,B,F,A,Q,X,ce,le,pe,fe,be,me,de,ye,he,_e,$e,ge,ve,xe,we,Se,ke;const b=u.getField("author").data.join("").split(/\s+and\s+/i).map(Ee=>{const Oe=/^([^\s,]+)([†*]*),\s*([^\s,]+)/.exec(Ee);if(Oe){const[,Ve,Je,He]=Oe;return`${He} ${Ve}${Je}`.trim()}return Ee.trim()}).join(", ");return{isShow:((S=(k=u.getField("bibtex_show"))==null?void 0:k.data)==null?void 0:S.join(""))??"",date:`${((w=u.getField("year"))==null?void 0:w.data)??""}.${((d=u.getField("month"))==null?void 0:d.data)??""}.${((c=u.getField("day"))==null?void 0:c.data)??""}`,title:((f=(x=u.getField("title"))==null?void 0:x.data)==null?void 0:f.join(""))??"",authors:b,journal:((p=(i=u.getField("journal"))==null?void 0:i.data)==null?void 0:p.join(""))??"",abstract:((h=(t=u.getField("abstract"))==null?void 0:t.data)==null?void 0:h.join(""))??"",figure:((O=(v=u.getField("preview"))==null?void 0:v.data)==null?void 0:O.join(""))??"",keywords:((F=(B=u.getField("keywords"))==null?void 0:B.data)==null?void 0:F.join("").split(";"))??[],links:{"Google Scholar":((Q=(A=u.getField("google_scholar"))==null?void 0:A.data)==null?void 0:Q.join(""))??"",[`PMID:${((ce=(X=u.getField("pmid"))==null?void 0:X.data)==null?void 0:ce.join(""))??""}`]:[`https://pubmed.ncbi.nlm.nih.gov/${((pe=(le=u.getField("pmid"))==null?void 0:le.data)==null?void 0:pe.join(""))??""}`],[`DOI:${((be=(fe=u.getField("doi"))==null?void 0:fe.data)==null?void 0:be.join(""))??""}`]:[`https://doi.org/${((de=(me=u.getField("doi"))==null?void 0:me.data)==null?void 0:de.join(""))??""}`],Website:((he=(ye=u.getField("website"))==null?void 0:ye.data)==null?void 0:he.join(""))??"",HTML:(($e=(_e=u.getField("url"))==null?void 0:_e.data)==null?void 0:$e.join(""))??"","Chinese Report":((ve=(ge=u.getField("chinese_report"))==null?void 0:ge.data)==null?void 0:ve.join(""))??"",pdf:((we=(xe=u.getField("pdf"))==null?void 0:xe.data)==null?void 0:we.join(""))??""},citation:((ke=(Se=u.getField("citation"))==null?void 0:Se.data)==null?void 0:ke.join(""))??""}}),m.value=$(l.value)}catch(y){console.error("Failed to fetch jsons/04.publications.json:",y)}});function g(y){try{navigator.clipboard.writeText(y),Ae.success("Paper Citation Copied!")}catch(o){console.error("复制失败:",o),Ae.error("复制失败，请手动复制")}}return(y,o)=>{const e=pt,r=lt,s=Bt,u=yt,b=ft,k=bt("font-awesome-icon"),S=$t,w=mt,d=ht,c=_t;return T(),z(J,null,[o[2]||(o[2]=R("div",{class:"wrapper-background"},null,-1)),R("div",Yt,[N(r,null,{default:P(()=>[N(e,{span:2}),N(e,{span:20},{default:P(()=>[N(r,null,{default:P(()=>[a.value?(T(),D(e,{key:0,class:"wrapper-sketch-text",span:_.value>1200?14:24},{default:P(()=>[o[0]||(o[0]=R("div",{class:"wrapper-sketch-text-title"},"Publications",-1)),R("div",Kt,q(a.value.subtitle),1),R("h1",Gt,q(a.value.slogan),1)]),_:1},8,["span"])):K("",!0)]),_:1})]),_:1}),N(e,{span:2})]),_:1})]),N(r,{class:"publications-wrap",style:ze({"background-color":C.value?"#131124":"#cdd1d3"})},{default:P(()=>[N(e,{span:2}),N(e,{span:20},{default:P(()=>[o[1]||(o[1]=R("h2",null,"Click to jump the year",-1)),(T(!0),z(J,null,Z(m.value,(x,f)=>(T(),D(s,{class:"publications-wrap-years",size:"large",effect:"plain",key:f,checked:"",onClick:i=>n(x.year)},{default:P(()=>[U(q(x.year),1)]),_:2},1032,["onClick"]))),128)),(T(!0),z(J,null,Z(m.value,(x,f)=>(T(),D(c,{id:x.year,class:"publications-papers",key:f},{default:P(()=>[N(u,{type:"success",size:"large",hollow:"true"},{default:P(()=>[R("h1",null,q(x.year)+" ("+q(x.count)+" total)",1)]),_:2},1024),(T(!0),z(J,null,Z(x.papers,(i,p)=>(T(),D(u,{key:p,timestamp:i.date,placement:"top",type:"success",size:"large",hollow:"true"},{default:P(()=>[N(d,{class:"publications-papers-card"},{default:P(()=>[N(r,null,{default:P(()=>[N(e,{span:_.value>1600?11:24},{default:P(()=>[i.figure?(T(),D(b,{key:0,style:{width:"100%","margin-bottom":"20px"},src:i.figure,"zoom-rate":1.2,"preview-src-list":[i.figure],"initial-index":4,"hide-on-click-modal":"true"},null,8,["src","preview-src-list"])):K("",!0),(T(!0),z(J,null,Z(i.keywords,(t,h)=>te((T(),D(S,{class:"publications-papers-card-tags",key:h},{default:P(()=>[N(k,{icon:["fas","tag"]}),U(" "+q(t),1)]),_:2},1024)),[[ne,i.keywords[0]]])),128))]),_:2},1032,["span"]),N(e,{span:_.value>1600?12:24,offset:_.value>1600?1:0},{default:P(()=>[N(w,{underline:!1,target:"_blank",type:"primary",href:i.links.HTML},{default:P(()=>[R("span",Zt,q(i.title),1)]),_:2},1032,["href"]),R("div",Xt,[N(k,{icon:"people-group"}),U(" "+q(i.authors),1)]),R("div",en,[N(k,{icon:"book"}),U(" "+q(i.journal),1)]),R("p",tn,q(i.abstract),1),(T(!0),z(J,null,Z(i.links,(t,h,v)=>te((T(),D(w,{class:"publications-papers-card-links",underline:!1,target:"_blank",type:"primary",key:v,href:t},{default:P(()=>[N(k,{icon:["fas","link"]}),U(" "+q(h),1)]),_:2},1032,["href"])),[[ne,t]])),128)),N(w,{underline:!1,onClick:t=>g(i.citation)},{default:P(()=>[N(k,{icon:"quote-left"}),U(" "+q(i.citation),1)]),_:2},1032,["onClick"])]),_:2},1032,["span","offset"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:2},1032,["id"]))),128))]),_:1}),N(e,{span:2})]),_:1},8,["style"])],64)}}}),an=dt(nn,[["__scopeId","data-v-44ae3721"]]);export{an as default};
