(function(y,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(y=typeof globalThis<"u"?globalThis:y||self,o(y["vue-leaflet"]={},y.Vue))})(this,function(y,o){"use strict";const X=(t,n=100)=>{let e;const a=function(...l){const s=this;e&&clearTimeout(e),e=setTimeout(()=>{t.apply(s,l),e=null},n)};return a.cancel=function(){e&&clearTimeout(e)},a},Y=function(t){for(const n of Object.values(t))n&&$(n.cancel)&&n.cancel()},ve=t=>!t||typeof t.charAt!="function"?t:t.charAt(0).toUpperCase()+t.slice(1),$=t=>typeof t=="function",L=(t,n,e)=>{for(const a in e){const l="set"+ve(a);t[l]?o.watch(()=>e[a],(s,i)=>{t[l](s,i)}):n[l]&&o.watch(()=>e[a],s=>{n[l](s)})}},b=(t,n,e={})=>{const a={...e};for(const l in t){const s=n[l],i=t[l];s&&(s&&s.custom===!0||i!==void 0&&(a[l]=i))}return a},v=t=>{const n={};for(const e in t)if(e.startsWith("on")&&!e.startsWith("onUpdate")&&e!=="onReady"){const a=e.slice(2).toLocaleLowerCase();n[a]=t[e]}return n},Oe=async t=>{const n=await Promise.all([import("leaflet/dist/images/marker-icon-2x.png"),import("leaflet/dist/images/marker-icon.png"),import("leaflet/dist/images/marker-shadow.png")]);delete t.Default.prototype._getIconUrl,t.Default.mergeOptions({iconRetinaUrl:n[0].default,iconUrl:n[1].default,shadowUrl:n[2].default})},U=t=>{const n=o.ref(()=>console.warn(`Method ${t} has been invoked without being replaced`)),e=(...a)=>n.value(...a);return e.wrapped=n,o.provide(t,e),e},H=(t,n)=>t.wrapped.value=n,f=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,h="useGlobalLeaflet",A={options:{type:Object,default:()=>({}),custom:!0}},G=t=>({options:t.options,methods:{}}),k={...A,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},I=(t,n,e)=>{const a=o.inject("addLayer"),l=o.inject("removeLayer"),{options:s,methods:i}=G(t),r=b(t,k,s),c=()=>a({leafletObject:n.value}),d=()=>l({leafletObject:n.value}),m={...i,setAttribution(p){d(),n.value.options.attribution=p,t.visible&&c()},setName(){d(),t.visible&&c()},setLayerType(){d(),t.visible&&c()},setVisible(p){n.value&&(p?c():d())},bindPopup({leafletObject:p}){if(!n.value||!$(n.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}n.value.bindPopup(p)},bindTooltip({leafletObject:p}){if(!n.value||!$(n.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}n.value.bindTooltip(p)},unbindTooltip(){n.value&&($(n.value.closeTooltip)&&n.value.closeTooltip(),$(n.value.unbindTooltip)&&n.value.unbindTooltip())},unbindPopup(){n.value&&($(n.value.closePopup)&&n.value.closePopup(),$(n.value.unbindPopup)&&n.value.unbindPopup())},updateVisibleProp(p){e.emit("update:visible",p)}};return o.provide("bindPopup",m.bindPopup),o.provide("bindTooltip",m.bindTooltip),o.provide("unbindTooltip",m.unbindTooltip),o.provide("unbindPopup",m.unbindPopup),o.onUnmounted(()=>{m.unbindPopup(),m.unbindTooltip(),d()}),{options:r,methods:m}},C=(t,n)=>{if(t&&n.default)return o.h("div",{style:{display:"none"}},n.default())},V={...k,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},je=(t,n,e)=>{const{options:a,methods:l}=I(t,n,e);return{options:b(t,V,a),methods:l}},Z={...V,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},x=(t,n,e)=>{const{options:a,methods:l}=je(t,n,e),s=b(t,Z,a),i=o.inject("removeLayer"),r={...l,setStroke(c){n.value.setStyle({stroke:c})},setColor(c){n.value.setStyle({color:c})},setWeight(c){n.value.setStyle({weight:c})},setOpacity(c){n.value.setStyle({opacity:c})},setLineCap(c){n.value.setStyle({lineCap:c})},setLineJoin(c){n.value.setStyle({lineJoin:c})},setDashArray(c){n.value.setStyle({dashArray:c})},setDashOffset(c){n.value.setStyle({dashOffset:c})},setFill(c){n.value.setStyle({fill:c})},setFillColor(c){n.value.setStyle({fillColor:c})},setFillOpacity(c){n.value.setStyle({fillOpacity:c})},setFillRule(c){n.value.setStyle({fillRule:c})},setClassName(c){n.value.setStyle({className:c})}};return o.onBeforeUnmount(()=>{i({leafletObject:n.value})}),{options:s,methods:r}},q={...Z,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},ee=(t,n,e)=>{const{options:a,methods:l}=x(t,n,e),s=b(t,q,a),i={...l,setRadius(r){n.value.setRadius(r)},setLatLng(r){n.value.setLatLng(r)}};return{options:s,methods:i}},te={...q,radius:{type:Number}},Se=(t,n,e)=>{const{options:a,methods:l}=ee(t,n,e),s=b(t,te,a),i={...l};return{options:s,methods:i}},Ce={name:"LCircle",props:te,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=Se(t,e,n);return o.onMounted(async()=>{const{circle:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.latLng,i));const m=v(n.attrs);d.on(e.value,m),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},Te={name:"LCircleMarker",props:q,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=ee(t,e,n);return o.onMounted(async()=>{const{circleMarker:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.latLng,i));const m=v(n.attrs);d.on(e.value,m),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},w={...A,position:{type:String}},N=(t,n)=>{const{options:e,methods:a}=G(t),l=b(t,w,e),s={...a,setPosition(i){n.value&&n.value.setPosition(i)}};return o.onUnmounted(()=>{n.value&&n.value.remove()}),{options:l,methods:s}},Pe=t=>t.default?o.h("div",{ref:"root"},t.default()):null,$e={name:"LControl",props:{...w,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(t,n){const e=o.ref({}),a=o.ref(null),l=o.inject(h),s=o.inject("registerControl"),{options:i,methods:r}=N(t,e);return o.onMounted(async()=>{const{Control:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm"),m=c.extend({onAdd(){return a.value}});e.value=o.markRaw(new m(i)),L(r,e.value,t),s({leafletObject:e.value}),t.disableClickPropagation&&d.disableClickPropagation(a.value),t.disableScrollPropagation&&d.disableScrollPropagation(a.value),o.nextTick(()=>n.emit("ready",e.value))}),{root:a,leafletObject:e}},render(){return Pe(this.$slots)}},ne={...w,prefix:{type:String}},Be=(t,n)=>{const{options:e,methods:a}=N(t,n),l=b(t,ne,e),s={...a,setPrefix(i){n.value.setPrefix(i)}};return{options:l,methods:s}},ke={name:"LControlAttribution",props:ne,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("registerControl"),{options:s,methods:i}=Be(t,e);return o.onMounted(async()=>{const{control:r}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r.attribution(s)),L(i,e.value,t),l({leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}},oe={...w,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},we=(t,n)=>{const{options:e}=N(t,n);return{options:b(t,oe,e),methods:{addLayer(s){s.layerType==="base"?n.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&n.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){n.value.removeLayer(s.leafletObject)}}}},Me={name:"LControlLayers",props:oe,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("registerLayerControl"),{options:s,methods:i}=we(t,e);return o.onMounted(async()=>{const{control:r}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r.layers(null,null,s)),L(i,e.value,t),l({...t,...i,leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}},ae={...w,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Ae=(t,n)=>{const{options:e,methods:a}=N(t,n);return{options:b(t,ae,e),methods:a}},Ge={name:"LControlScale",props:ae,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("registerControl"),{options:s,methods:i}=Ae(t,e);return o.onMounted(async()=>{const{control:r}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r.scale(s)),L(i,e.value,t),l({leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}},se={...w,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Ie=(t,n)=>{const{options:e,methods:a}=N(t,n);return{options:b(t,se,e),methods:a}},Ne={name:"LControlZoom",props:se,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("registerControl"),{options:s,methods:i}=Ie(t,e);return o.onMounted(async()=>{const{control:r}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r.zoom(s)),L(i,e.value,t),l({leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}},z={...k},W=(t,n,e)=>{const{options:a,methods:l}=I(t,n,e),s=b(t,z,a),i={...l,addLayer(r){n.value.addLayer(r.leafletObject)},removeLayer(r){n.value.removeLayer(r.leafletObject)}};return o.provide("addLayer",i.addLayer),o.provide("removeLayer",i.removeLayer),{options:s,methods:i}},re={...z},De=(t,n)=>{const{options:e,methods:a}=W(t,n),l=b(t,re,e),s={...a};return{options:l,methods:s}},Ee={props:re,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{methods:i,options:r}=De(t,e);return o.onMounted(async()=>{const{featureGroup:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(r));const m=v(n.attrs);d.on(e.value,m),L(i,e.value,t),s({...t,...i,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},le={...z,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:[Object,Function],custom:!0}},Ue=(t,n,e)=>{const{options:a,methods:l}=W(t,n,e),s=b(t,le,a);Object.prototype.hasOwnProperty.call(t,"optionsStyle")&&(s.style=t.optionsStyle);const i={...l,setGeojson(r){n.value.clearLayers(),n.value.addData(r)},setOptionsStyle(r){n.value.setStyle(r)},getGeoJSONData(){return n.value.toGeoJSON()},getBounds(){return n.value.getBounds()}};return{options:s,methods:i}},He={props:le,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{methods:i,options:r}=Ue(t,e,n);return o.onMounted(async()=>{const{geoJSON:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.geojson,r));const m=v(n.attrs);d.on(e.value,m),L(i,e.value,t),s({...t,...i,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},J={...k,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:Number},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number}},ie=(t,n,e)=>{const{options:a,methods:l}=I(t,n,e);return{options:b(t,J,a),methods:{...l}}},ze={props:{...J,childRender:{type:Function,required:!0}},setup(t,n){const e=o.ref({}),a=o.ref({}),l=o.ref(null),s=o.ref(!1),i=o.inject(h),r=o.inject("addLayer"),{options:c,methods:d}=ie(t,e,n);return o.onMounted(async()=>{const{GridLayer:m,DomEvent:p,DomUtil:T}=i?f.L:await import("leaflet/dist/leaflet-src.esm");d.onUnload=S=>{const O=e.value._tileCoordsToKey(S.coords);a[O]&&(a[O].innerHTML="",a[O]=void 0)},d.setTileComponent=()=>{e.value.redraw()};const g=m.extend({createTile(S){const O=e.value._tileCoordsToKey(S);a[O]=T.create("div");let B=o.h({setup:t.childRender,props:["coords"]},{coords:S});return o.render(B,a[O]),a[O]}});e.value=o.markRaw(new g(c));const j=v(n.attrs);p.on(e.value,j),e.value.on("tileunload",d.onUnload),L(d,e.value,t),r({...t,...d,leafletObject:e.value}),s.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),o.onUnmounted(()=>{e.value.off("tileunload",d.onUnload)}),{root:l,ready:s,leafletObject:e}},render(){return this.ready?o.h("div",{style:{display:"none"},ref:"root"}):null}},ce={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Fe={name:"LIcon",props:{...ce,...A},setup(t,n){const e=o.ref(null),a=o.inject(h),l=o.inject("canSetParentHtml"),s=o.inject("setParentHtml"),i=o.inject("setIcon");let r,c,d,m,p;const T=(O,B,D)=>{const M=O&&O.innerHTML;if(!B){D&&p&&l()&&s(M);return}const P=v(n.attrs);p&&c(p,P);const{options:Q}=G(t),u=b(t,ce,Q);M&&(u.html=M),p=u.html?d(u):m(u),r(p,P),i(p)},g=()=>{o.nextTick(()=>T(e.value,!0,!1))},j=()=>{o.nextTick(()=>T(e.value,!1,!0))},S={setIconUrl:g,setIconRetinaUrl:g,setIconSize:g,setIconAnchor:g,setPopupAnchor:g,setTooltipAnchor:g,setShadowUrl:g,setShadowRetinaUrl:g,setShadowAnchor:g,setBgPos:g,setClassName:g,setHtml:g};return o.onMounted(async()=>{const{DomEvent:O,divIcon:B,icon:D}=a?f.L:await import("leaflet/dist/leaflet-src.esm");r=O.on,c=O.off,d=B,m=D,L(S,{},t),new MutationObserver(j).observe(e.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),g()}),{root:e}},render(){const t=this.$slots.default?this.$slots.default():void 0;return o.h("div",{ref:"root"},t)}},de={...k,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},Ze=(t,n,e)=>{const{options:a,methods:l}=I(t,n,e),s=b(t,de,a),i={...l,setOpacity(r){return n.value.setOpacity(r)},setUrl(r){return n.value.setUrl(r)},setBounds(r){return n.value.setBounds(r)},getBounds(){return n.value.getBounds()},getElement(){return n.value.getElement()},bringToFront(){return n.value.bringToFront()},bringToBack(){return n.value.bringToBack()},setZIndex(r){return n.value.setZIndex(r)}};return{options:s,methods:i}},qe={name:"LImageOverlay",props:de,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=Ze(t,e,n);return o.onMounted(async()=>{const{imageOverlay:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.url,t.bounds,i));const m=v(n.attrs);d.on(e.value,m),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},We={props:z,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{methods:i}=W(t,e,n);return o.onMounted(async()=>{const{layerGroup:r,DomEvent:c}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r(t.options));const d=v(n.attrs);c.on(e.value,d),L(i,e.value,t),s({...t,...i,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},ue={...A,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:Array},paddingTopLeft:{type:Array},padding:{type:Array},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Je={emits:["ready","update:zoom","update:center","update:bounds"],props:ue,setup(t,n){const e=o.ref(null),a=o.reactive({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:l}=G(t),s=b(t,ue,l),i=U("addLayer"),r=U("removeLayer"),c=U("registerControl"),d=U("registerLayerControl");o.provide(h,t.useGlobalLeaflet);const m={moveEndHandler:X(()=>{n.emit("update:zoom",a.leafletRef.getZoom()),n.emit("update:center",a.leafletRef.getCenter()),n.emit("update:bounds",a.leafletRef.getBounds())}),overlayAddHandler(g){const j=a.layersInControl.find(S=>S.name===g.name);j&&j.updateVisibleProp(!0)},overlayRemoveHandler(g){const j=a.layersInControl.find(S=>S.name===g.name);j&&j.updateVisibleProp(!1)}};o.onMounted(async()=>{t.useGlobalLeaflet&&(f.L=f.L||await import("leaflet"));const{map:g,CRS:j,Icon:S,latLngBounds:O,latLng:B,DomEvent:D}=t.useGlobalLeaflet?f.L:await import("leaflet/dist/leaflet-src.esm");try{s.beforeMapMount&&await s.beforeMapMount()}catch(u){console.error(`The following error occurred running the provided beforeMapMount hook ${u.message}`)}await Oe(S);const M=typeof s.crs=="string"?j[s.crs]:s.crs;s.crs=M||j.EPSG3857;const P={addLayer(u){u.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd.push(u):a.layersInControl.find(E=>E.leafletObject._leaflet_id===u.leafletObject._leaflet_id)||(a.layerControl.addLayer(u),a.layersInControl.push(u))),u.visible!==!1&&a.leafletRef.addLayer(u.leafletObject)},removeLayer(u){u.layerType!==void 0&&(a.layerControl===void 0?a.layersToAdd=a.layersToAdd.filter(_=>_.name!==u.name):(a.layerControl.removeLayer(u.leafletObject),a.layersInControl=a.layersInControl.filter(_=>_.leafletObject._leaflet_id!==u.leafletObject._leaflet_id))),a.leafletRef.removeLayer(u.leafletObject)},registerLayerControl(u){a.layerControl=u,a.layersToAdd.forEach(_=>{a.layerControl.addLayer(_)}),a.layersToAdd=[],c(u)},registerControl(u){a.leafletRef.addControl(u.leafletObject)},setZoom(u){const _=a.leafletRef.getZoom();u!==_&&a.leafletRef.setZoom(u,{animate:t.noBlockingAnimations?!1:null})},setPaddingBottomRight(u){a.paddingBottomRight=u},setPaddingTopLeft(u){a.paddingTopLeft=u},setPadding(u){a.padding=u},setCrs(u){const _=a.leafletRef.getBounds();a.leafletRef.options.crs=u,a.leafletRef.fitBounds(_,{animate:!1,padding:[0,0]})},fitBounds(u){a.leafletRef.fitBounds(u,{animate:this.noBlockingAnimations?!1:null})},setBounds(u){if(!u)return;const _=O(u);if(!_.isValid())return;!(a.lastSetBounds||a.leafletRef.getBounds()).equals(_,0)&&(a.lastSetBounds=_,a.leafletRef.fitBounds(_,this.fitBoundsOptions))},setCenter(u){if(u==null)return;const _=B(u),E=a.lastSetCenter||a.leafletRef.getCenter();(E.lat!==_.lat||E.lng!==_.lng)&&(a.lastSetCenter=_,a.leafletRef.panTo(_,{animate:this.noBlockingAnimations?!1:null}))}};H(i,P.addLayer),H(r,P.removeLayer),H(c,P.registerControl),H(d,P.registerLayerControl),a.leafletRef=o.markRaw(g(e.value,s)),L(P,a.leafletRef,t);const Q=v(n.attrs);a.leafletRef.on("moveend",m.moveEndHandler),a.leafletRef.on("overlayadd",m.overlayAddHandler),a.leafletRef.on("overlayremove",m.overlayRemoveHandler),D.on(a.leafletRef,Q),a.ready=!0,o.nextTick(()=>n.emit("ready",a.leafletRef))}),o.onBeforeUnmount(()=>{Y(m),a.leafletRef&&(a.leafletRef.off(),a.leafletRef.remove())});const p=o.computed(()=>a.leafletRef),T=o.computed(()=>a.ready);return{root:e,ready:T,leafletObject:p}},render(){return o.h("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}},Re=["Symbol(Comment)","Symbol(Text)"],Ke=["LTooltip","LPopup"],me={...k,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Qe=(t,n,e)=>{const{options:a,methods:l}=I(t,n,e),s=b(t,me,a),i={...l,setDraggable(r){n.value.dragging&&(r?n.value.dragging.enable():n.value.dragging.disable())},latLngSync(r){e.emit("update:latLng",r.latlng),e.emit("update:lat-lng",r.latlng)},setLatLng(r){if(r!=null&&n.value){const c=n.value.getLatLng();(!c||!c.equals(r))&&n.value.setLatLng(r)}}};return{options:s,methods:i}},Xe=(t,n)=>{const e=n.slots.default&&n.slots.default();return e&&e.length&&e.some(Ye)};function Ye(t){return!(Re.includes(t.type.toString())||Ke.includes(t.type.name))}const Ve={name:"LMarker",props:me,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer");o.provide("canSetParentHtml",()=>!!e.value.getElement()),o.provide("setParentHtml",d=>e.value.getElement().innerHTML=d),o.provide("setIcon",d=>e.value.setIcon&&e.value.setIcon(d));const{options:i,methods:r}=Qe(t,e,n),c={moveHandler:X(r.latLngSync)};return o.onMounted(async()=>{const{marker:d,DomEvent:m,divIcon:p}=l?f.L:await import("leaflet/dist/leaflet-src.esm");Xe(i,n)&&(i.icon=p({className:""})),e.value=o.markRaw(d(t.latLng,i));const T=v(n.attrs);m.on(e.value,T),e.value.on("move",c.moveHandler),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),o.onBeforeUnmount(()=>Y(c)),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},R={...Z,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},ye=(t,n,e)=>{const{options:a,methods:l}=x(t,n,e),s=b(t,R,a),i={...l,setSmoothFactor(r){n.value.setStyle({smoothFactor:r})},setNoClip(r){n.value.setStyle({noClip:r})},addLatLng(r){n.value.addLatLng(r)}};return{options:s,methods:i}},F={...R},pe=(t,n,e)=>{const{options:a,methods:l}=ye(t,n,e),s=b(t,F,a),i={...l,toGeoJSON(r){return n.value.toGeoJSON(r)}};return{options:s,methods:i}},xe={name:"LPolygon",props:F,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=pe(t,e,n);return o.onMounted(async()=>{const{polygon:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.latLngs,i));const m=v(n.attrs);d.on(e.value,m),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},et={name:"LPolyline",props:R,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=ye(t,e,n);return o.onMounted(async()=>{const{polyline:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(t.latLngs,i));const m=v(n.attrs);d.on(e.value,m),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},fe={...A,content:{type:String,default:null}},be=(t,n)=>{const{options:e,methods:a}=G(t),l={...a,setContent(s){n.value&&s!==null&&s!==void 0&&n.value.setContent(s)}};return{options:e,methods:l}},Le=t=>t.default?o.h("div",{ref:"root"},t.default()):null,tt={...fe,latLng:{type:[Object,Array],default:()=>[]}},nt=(t,n)=>{const{options:e,methods:a}=be(t,n);return{options:e,methods:a}},ot={name:"LPopup",props:tt,setup(t,n){const e=o.ref({}),a=o.ref(null),l=o.inject(h),s=o.inject("bindPopup"),i=o.inject("unbindPopup"),{options:r,methods:c}=nt(t,e);return o.onMounted(async()=>{const{popup:d,DomEvent:m}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(d(r)),t.latLng!==void 0&&e.value.setLatLng(t.latLng),L(c,e.value,t);const p=v(n.attrs);m.on(e.value,p),e.value.setContent(t.content||a.value),s({leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),o.onBeforeUnmount(()=>{i({leafletObject:e.value})}),{root:a,leafletObject:e}},render(){return Le(this.$slots)}};F.latLngs.required=!1;const he={...F,bounds:{type:Array,custom:!0}},at=(t,n,e)=>{const{options:a,methods:l}=pe(t,n,e),s=b(t,he,a),i={...l,setBounds(r){n.value.setBounds(r)},setLatLngs(r){n.value.setBounds(r)}};return{options:s,methods:i}},st={name:"LRectangle",props:he,setup(t,n){const e=o.ref({}),a=o.ref(!1),l=o.inject(h),s=o.inject("addLayer"),{options:i,methods:r}=at(t,e,n);return o.onMounted(async()=>{const{rectangle:c,latLngBounds:d,DomEvent:m}=l?f.L:await import("leaflet/dist/leaflet-src.esm"),p=t.bounds&&t.bounds.length?d(t.bounds):d(t.latLngs);e.value=o.markRaw(c(p,i));const T=v(n.attrs);m.on(e.value,T),L(r,e.value,t),s({...t,...r,leafletObject:e.value}),a.value=!0,o.nextTick(()=>n.emit("ready",e.value))}),{ready:a,leafletObject:e}},render(){return C(this.ready,this.$slots)}},K={...J,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:t=>typeof t=="string"?!0:Array.isArray(t)?t.every(n=>typeof n=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},ge=(t,n,e)=>{const{options:a,methods:l}=ie(t,n,e),s=b(t,K,a),i={...l};return{options:s,methods:i}},rt={props:K,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("addLayer"),{options:s,methods:i}=ge(t,e,n);return o.onMounted(async()=>{const{tileLayer:r,DomEvent:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r(t.url,s));const d=v(n.attrs);c.on(e.value,d),L(i,e.value,t),l({...t,...i,leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}},lt={...fe},it=(t,n)=>{const{options:e,methods:a}=be(t,n),l=o.inject("unbindTooltip");return o.onBeforeUnmount(()=>{l()}),{options:e,methods:a}},ct={name:"LTooltip",props:lt,setup(t,n){const e=o.ref({}),a=o.ref(null),l=o.inject(h),s=o.inject("bindTooltip"),{options:i,methods:r}=it(t,e);return o.onMounted(async()=>{const{tooltip:c,DomEvent:d}=l?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(c(i)),L(r,e.value,t);const m=v(n.attrs);d.on(e.value,m),e.value.setContent(t.content||a.value),s({leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{root:a,leafletObject:e}},render(){return Le(this.$slots)}},_e={...K,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},dt=(t,n)=>{const{options:e,methods:a}=ge(t,n);return{options:b(t,_e,e),methods:{...a}}},ut={props:_e,setup(t,n){const e=o.ref({}),a=o.inject(h),l=o.inject("addLayer"),{options:s,methods:i}=dt(t,e);return o.onMounted(async()=>{const{tileLayer:r,DomEvent:c}=a?f.L:await import("leaflet/dist/leaflet-src.esm");e.value=o.markRaw(r.wms(t.url,s));const d=v(n.attrs);c.on(e.value,d),L(i,e.value,t),l({...t,...i,leafletObject:e.value}),o.nextTick(()=>n.emit("ready",e.value))}),{leafletObject:e}},render(){return null}};y.LCircle=Ce,y.LCircleMarker=Te,y.LControl=$e,y.LControlAttribution=ke,y.LControlLayers=Me,y.LControlScale=Ge,y.LControlZoom=Ne,y.LFeatureGroup=Ee,y.LGeoJson=He,y.LGridLayer=ze,y.LIcon=Fe,y.LImageOverlay=qe,y.LLayerGroup=We,y.LMap=Je,y.LMarker=Ve,y.LPolygon=xe,y.LPolyline=et,y.LPopup=ot,y.LRectangle=st,y.LTileLayer=rt,y.LTooltip=ct,y.LWmsTileLayer=ut,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
